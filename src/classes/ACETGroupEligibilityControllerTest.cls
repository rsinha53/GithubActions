@istest(seeAllData = false)
private Class ACETGroupEligibilityControllerTest{
    static testMethod void GroupEligibilityControllerTest() 
    {     
        Map<String, String> mapISLWSConfigs = new Map<String, String>(); 
        mapISLWSConfigs.put('ISLConAccessToken', 'e9b3f2b1-8863-49ec-9ff8-40da25961ef5');
        mapISLWSConfigs.put('OILHttpHeaderAccept', 'application/json;charset=UTF-8');
        mapISLWSConfigs.put('OILHttpHeaderActor', 'ACET');
        mapISLWSConfigs.put('OILHttpHeaderScope', 'read'); 
        mapISLWSConfigs.put('ISLOAuthContentType', 'application/x-www-form-urlencoded');
        mapISLWSConfigs.put('ISLOAuthGrantType', 'client_credentials');
        mapISLWSConfigs.put('dev_ISLOAuthClientId', 'ISLStageConClientId');
        mapISLWSConfigs.put('dev_ISLOAuthClientSecret', 'ISLStageConClientSecret');
        mapISLWSConfigs.put('dev_ISLOAuthEndpoint', 'https://api-stg.optum.com:8443');
        mapISLWSConfigs.put('dev_GetMedicalProviderEndpoint', '/api/test/eisl/providers/v1.0/medicalprovider/read');
        mapISLWSConfigs.put('dev_ISLOAuthTokenEndpoint', '/auth/oauth/v2/token');
        mapISLWSConfigs.put('OILTimeout', '3000');
        
        List<ISL_Webservice_Config__c> lstISLWSConfigs = ACETTestDataUtility.CreateISLWebserviceConfigurations(mapISLWSConfigs);
        insert lstISLWSConfigs;
        
        Map<String, Integer> mapOnshoreVerbgs = new Map<String, Integer>(); 
        mapOnshoreVerbgs.put('All Services Offshore',01);
        mapOnshoreVerbgs.put('Claim Transactions',02);
        mapOnshoreVerbgs.put('All Services Onshore',08);
        List<ACETOnshoreIndicatorVerbiage__c> lstOnshoreVerbgs = ACETTestDataUtility.CreateOnshoreVerbiages(mapOnshoreVerbgs);
        insert lstOnshoreVerbgs;
         
          RecordType newRecord = [SELECT Id FROM RecordType WHERE Name = 'Person Account' and SObjectType = 'Account'];
        
        Account accountTest = new Account();
        accountTest.FirstName = 'Test';
        accountTest.LastName = 'Contact';
        accountTest.EID__c = 'PIN';
        accountTest.EID__pc = 'PIN';
        accountTest.RecordTypeId = newRecord.Id;
        insert accountTest;

    Account acc = [SELECT Id,personcontactid from Account where Id=:accountTest.Id];
        Contact contactRec = [SELECT Id,LastName,FirstName,Name,EID__c,AccountId from Contact where Id=:acc.personcontactid];
            
          Interaction__c inter = ACETProviderUtility.CreateInteraction(contactRec.Id,'Phone','',ContactRec.name);
          inter.Highlight_Panel_GroupInfo__c='{"UHCBS":"YES","ServiceTeam":"National Accounts","RiskManagement":"Audit","RenewalDate":"4/6/2018","RelationshipType":null,"RatingMethod":"","GroupStatus":"Active","groupSName":"37E9769CORG1","GroupName":"1068479- 37E9769CORG1","EffectiveStartDate":"4/6/2017"}';
          insert inter;
    
       Test.startTest();
         StaticResource GetDummyResp = [SELECT Body FROM StaticResource WHERE Name = 'Test_GetEmployerResponseMultiple'];
         String GetEmpGrpRes = GetDummyResp.Body.toString();
         //system.debug('------GetEmpGrpRes------'+GetEmpGrpRes);
         MockHttpCalloutResponseGenerator.MockHttpResponse OILResponse = new MockHttpCalloutResponseGenerator.MockHttpResponse(200, 'OK', GetEmpGrpRes);
         OILResponse.TokenExpired = false;
        
            MockHttpCalloutResponseGenerator MockHttpRes = new MockHttpCalloutResponseGenerator(null, OILResponse);
            Test.setMock(HttpCalloutMock.class, MockHttpRes);
        
        // Set mock callout class 
        Test.setMock(HttpCalloutMock.class, MockHttpRes); 
    
        PageReference ACETGroupEligibility = Page.ACETGroupEligibility;

                  
       Test.setCurrentPage(ACETGroupEligibility);        
       //Date effDat = date.today()-2;
       //Date endDat = date.today()+2;
       apexpages.currentpage().getparameters().put('interactionId',inter.id);
       apexpages.currentpage().getparameters().put('groupId','1068479');
       apexpages.currentpage().getparameters().put('SRK', '624482262');
       apexpages.currentpage().getparameters().put('contractId','602613');
       apexpages.currentpage().getparameters().put('isMemberFlow','true');
       apexpages.currentpage().getparameters().put('filterStatus','Active');
       apexpages.currentpage().getparameters().put('status','Active');
       apexpages.currentpage().getparameters().put('effDate','1/1/2018');
       apexpages.currentpage().getparameters().put('covEffDate','1/1/2018');
       apexpages.currentpage().getparameters().put('covEndDate','1/1/9999');
       apexpages.currentpage().getparameters().put('additionalInfo', '{"Zip":null,"UHCBS":null,"surrogatekey":null,"State":null,"SitusState":null,"ServiceTeam":"Small Group","selectedPolicyContract":"602613","RiskManagement":"No","RenewalDate":null,"RelationshipType":"Primary Benefits Administrator","Relationship":null,"RatingMethod":"","providerType":null,"providerPhoneNumber":null,"ProductType":null,"Product":null,"producerSubject":"Best Buy","producerOriginator":null,"producerName":null,"producerIDPNF":null,"producerId":"4061351","primarySpecialty":null,"PolicyNumber":null,"platinumProvider":null,"PhoneNumber":null,"OriginatorRelationship":"Primary Benefits Administrator","OriginatorDOB":null,"OnshoreIndicatorVerbiage":null,"OnshoreIndicator":null,"Network":null,"MemberId":null,"LastName":null,"isProducerNotFound":null,"isMemNotFound":null,"isMember":null,"isGroupNotFound":null,"isGroup":null,"hsaPlan":null,"GroupStatus":null,"groupSName":null,"GroupNumber":null,"GroupName":null,"GroupN":"4061351 - Best Buy","groupFlowGroupNumber":"4061351","groupFlowGroupName":"Best Buy","Gender":null,"FirstName":null,"EndDate":null,"EmployerName":null,"EffectiveStartDate":"1/1/2018","EffectiveDate":null,"DOB":null,"contactName":"Josee Morin","ConsumerAccountIndicator":null,"BenefitPlanId":null,"BenefitBundleOptionId":null}');
       
               
       ACETGroupEligibilityController groupEligibility= new ACETGroupEligibilityController();     
       groupEligibility.subject=contactRec;
       ACETGroupEligibilityController.callwebservice('1068479');
       groupEligibility.showPolicyContract();
       groupEligibility.getInsuringRules();      
       groupEligibility.insuringRulesSelection();
       groupEligibility.getGroupInsuringRules();
       
       ACETGroupDetail gd = new ACETGroupDetail();
        
       ACETGroupDetail.GroupInsuringSettings gis = new ACETGroupDetail.GroupInsuringSettings();
        list<ACETGroupDetail.GroupInsuringSettings > gisList = new list<ACETGroupDetail.GroupInsuringSettings >();
        gis.classesCode = 'Test';
        gis.continuationResponsibilityType= 'Test';
        gis.insuranceContinuationType= 'Test';
        gis.onshoreRestriction= 'Test user';
        gis.insuringRulesEffectiveDates= '11/13/2018';
        gis.insuringRulesExpirationDates = '11/13/2018';
        gis.pcpRadomization= 'Test';
        gis.survivingSpouseIndicator= 'Test';
        gis.newBornAutoAddIndicator= 'Test';
        gis.countNewbornForCoverageLevelCodeIndicator= 'Test user';
        gis.earlyRetirement= 'Test';
        gis.workingRetirement= 'Test';
        gisList.add(gis);
        
        gd.groupInsuringSettings = gisList;
       Test.stopTest();
       
    }
    

    static testMethod void GroupEligibilityControllerTestConOptPopGrpSettingsNoPop() 
    {     
        Map<String, String> mapISLWSConfigs = new Map<String, String>(); 
        mapISLWSConfigs.put('ISLConAccessToken', 'e9b3f2b1-8863-49ec-9ff8-40da25961ef5');
        mapISLWSConfigs.put('OILHttpHeaderAccept', 'application/json;charset=UTF-8');
        mapISLWSConfigs.put('OILHttpHeaderActor', 'ACET');
        mapISLWSConfigs.put('OILHttpHeaderScope', 'read'); 
        mapISLWSConfigs.put('ISLOAuthContentType', 'application/x-www-form-urlencoded');
        mapISLWSConfigs.put('ISLOAuthGrantType', 'client_credentials');
        mapISLWSConfigs.put('dev_ISLOAuthClientId', 'ISLStageConClientId');
        mapISLWSConfigs.put('dev_ISLOAuthClientSecret', 'ISLStageConClientSecret');
        mapISLWSConfigs.put('dev_ISLOAuthEndpoint', 'https://api-stg.optum.com:8443');
        mapISLWSConfigs.put('dev_GetMedicalProviderEndpoint', '/api/test/eisl/providers/v1.0/medicalprovider/read');
        mapISLWSConfigs.put('dev_ISLOAuthTokenEndpoint', '/auth/oauth/v2/token');
        mapISLWSConfigs.put('OILTimeout', '3000');
        
        List<ISL_Webservice_Config__c> lstISLWSConfigs = ACETTestDataUtility.CreateISLWebserviceConfigurations(mapISLWSConfigs);
        insert lstISLWSConfigs;
        
        Map<String, Integer> mapOnshoreVerbgs = new Map<String, Integer>(); 
        mapOnshoreVerbgs.put('All Services Offshore',01);
        mapOnshoreVerbgs.put('Claim Transactions',02);
        mapOnshoreVerbgs.put('All Services Onshore',08);
        List<ACETOnshoreIndicatorVerbiage__c> lstOnshoreVerbgs = ACETTestDataUtility.CreateOnshoreVerbiages(mapOnshoreVerbgs);
        insert lstOnshoreVerbgs;
         
          RecordType newRecord = [SELECT Id FROM RecordType WHERE Name = 'Person Account' and SObjectType = 'Account'];
        
        Account accountTest = new Account();
        accountTest.FirstName = 'Test';
        accountTest.LastName = 'Contact';
        accountTest.EID__c = 'PIN';
        accountTest.EID__pc = 'PIN';
        accountTest.RecordTypeId = newRecord.Id;
        insert accountTest;

    Account acc = [SELECT Id,personcontactid from Account where Id=:accountTest.Id];
        Contact contactRec = [SELECT Id,LastName,FirstName,Name,EID__c,AccountId from Contact where Id=:acc.personcontactid];
            
          Interaction__c inter = ACETProviderUtility.CreateInteraction(contactRec.Id,'Phone','',ContactRec.name);
          inter.Highlight_Panel_GroupInfo__c='{"UHCBS":"YES","ServiceTeam":"National Accounts","RiskManagement":"Audit","RenewalDate":"4/6/2018","RelationshipType":null,"RatingMethod":"","GroupStatus":"Active","groupSName":"37E9769CORG1","GroupName":"1068479- 37E9769CORG1","EffectiveStartDate":"4/6/2017"}';
          insert inter;
    
       Test.startTest();
         String GetEmpGrpRes = '{"getEmployerGroup":{"getEmployerGroupResponse":{"employerGroup":{"groupNumber":"1265004","groupName":"Fairfield Processing Corporation","sourceSysCode":"CIRRUS","taxIdentificationNumber":["060642407"],"sizeDefinitionCode":"02","sizeDefinitionDescription":"Large Business","enrollmentType":"Paper Only","parentGroup":{"id":"0"},"alphaParentGroup":{"id":"1265004","name":"Fairfield Processing Corporation"},"riskManagementIndicator":"false","erisaIndicator":"true","groupLevelHoldIndicator":"true","groupLevelHold":[{"groupHoldCode":"FULFIL","groupHoldShortDescription":"Hold Fulfillment","groupHoldEffectiveDates":"2018-11-30","groupHoldExpirationDates":"9999-12-31","groupHoldTransactionDate":"2018-11-30","groupHoldCreatedByUserId":"MDADMUN"},{"groupHoldCode":"WELKIT","groupHoldShortDescription":"Welcome Kit","groupHoldEffectiveDates":"2018-11-30","groupHoldExpirationDates":"9999-12-31","groupHoldTransactionDate":"2018-11-30","groupHoldCreatedByUserId":"MDADMUN"}],"employeeCounts":[{"employeeCountDescription":"Total Count of Full Time Employees","employeeCount":"145","reportingYear":"2018","transactionDate":"2018-11-27"},{"employeeCountDescription":"Total Eligible","employeeCount":"145","reportingYear":"2018","transactionDate":"2018-11-30"}],"groupSettings":[{"cobAttestationFrequency":"0","cobAttestationDenyGracePeriod":"0","effectiveDate":"2019-01-01","expirationDate":"9999-12-31"}],"groupAddress":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"88 Rose Hill Avenue","addressCity":"DANBURY","addressPostalCode":"06813","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America","salesOfficeCode":"339","salesOfficeDescription":"Hartford/oth","effectiveDate":"2019-01-01","expirationDate":"9999-12-31"}],"groupContact":[{"roleType":"2","roleDescription":"Billing Contact","primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"Nancy","lastName":"Sasso","startDate":"2019-01-01","endDate":"9999-12-31","phone":[{"phoneType":"B","telephoneNumber":"203-744-2090"},{"phoneType":"F","telephoneNumber":"203-794-9313"}],"email":[{"communicationTypeCode":"EML","electronicAddress":"cys@fairfieldworld.com"}],"address":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"88 Rose Hill Avenue","addressCity":"DANBURY","addressPostalCode":"06813","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"}]},{"roleType":"1","roleDescription":"Benefit Administrator","primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"Nancy","lastName":"Sasso","startDate":"2019-01-01","endDate":"9999-12-31","phone":[{"phoneType":"B","telephoneNumber":"203-744-2090"},{"phoneType":"F","telephoneNumber":"203-794-9313"}],"email":[{"communicationTypeCode":"EML","electronicAddress":"cys@fairfieldworld.com"}],"address":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"88 Rose Hill Avenue","addressCity":"DANBURY","addressPostalCode":"06813","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"}]},{"roleType":"8","roleDescription":"SBC Contact","primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"Jeff","lastName":"Torreso","startDate":"2019-01-01","endDate":"9999-12-31","email":[{"communicationTypeCode":"EML","electronicAddress":"jtorreso@rogersbenefit.com"}]}],"groupInsuringRules":[{"cobraAdministrativeIndicator":"0","continuationResponsibilityType":"Member Group","insuranceContinuationType":"COBRA","onshoreRestriction":"All Services Offshore","insuringRulesEffectiveDates":"2019-01-01","insuringRulesExpirationDates":"9999-12-31","pcpRadomization":"01","survivingSpouseIndicator":"false","newBornAutoAddIndicator":"true","countNewbornForCoverageLevelCodeIndicator":"false"}],"groupPopulation":[{"classesDescription":"CT Office","populationEnrollmentType":"Supplied"},{"classesDescription":"St Louis Factor","populationEnrollmentType":"Supplied"},{"classesCode":"CTOFFICE","classesDescription":"CTOffice","populationEnrollmentType":"Supplied"},{"classesCode":"STLOUIS OFFICE","classesDescription":"StLouis Office","populationEnrollmentType":"Supplied"},{"classesCode":"NA3","classesDescription":"NA3","populationEnrollmentType":"Supplied"},{"classesDescription":"St Louis Factory","populationEnrollmentType":"Supplied"},{"classesDescription":"CT Factory","populationEnrollmentType":"Supplied"},{"classesCode":"CTFACTORY","classesDescription":"CTFactory","populationEnrollmentType":"Supplied"},{"classesCode":"NA","classesDescription":"NA","populationEnrollmentType":"Supplied"},{"classesCode":"NA2","classesDescription":"NA2","populationEnrollmentType":"Supplied"},{"classesCode":"STLOUIS FACTOR","classesDescription":"StLouis Factor","populationEnrollmentType":"Supplied"},{"classesDescription":"St Louis Office","populationEnrollmentType":"Supplied"}],"customerAccount":[{"planBillingGroupNumber":"27407 27413 27419 26501 26510 26519 27404 27410 27416 27406 27412 27418 27421 26509 27403 27409 27415 26502 27405 27411 27417 27420 26517 27408 27414","originalContractDate":"2019-01-01","migrationIndicator":"false","customerAccountOption":[{"customerAccountOptionId":"2555044","customerAccountOptionDescription":"OXFORD CONTRACT","customerAccountOptionType":"12 Months","statusCode":"I","statusDescription":"Inactive","startDate":"2019-01-01","renewalDate":"2020-01-01","terminationDate":"2019-12-31","stateOfIssueCode":"CT","stateOfIssueDescription":"CONNECTICUT","openEnrollmentStartDate":"2018-12-01","openEnrollmentEndDate":"2018-12-31","enrollmentInsuringRulesPopulationIndicator":"true","defineOpenEnrollmentbyPopulationIndicator":"false","customerAccountGroupPopulation":[{"classesDescription":"St Louis Factor"},{"classesDescription":"CT Factory"},{"classesDescription":"CT Office"},{"classesDescription":"St Louis Office"}],"customerAccountInsuringRules":[{"dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesDescription":"St Louis Factor","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesDescription":"CT Factory","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesDescription":"CT Office","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesDescription":"St Louis Office","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01",';
         GetEmpGrpRes += '"insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]}],"customerPurchase":[{"memberGroupContractPlanOptionID":"PO100002","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333372","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000172","benefitPlanDescription":"CT FREEDOM  6000/100 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1075.38"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1583.25"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"557.48"}]},{"memberGroupContractPlanOptionID":"PO100003","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333374","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000834","benefitPlanDescription":"CT FREEDOM 3000/70 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1146.40"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1687.81"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"594.30"}]},{"memberGroupContractPlanOptionID":"PO100001","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333373","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000167","benefitPlanDescription":"CT FREEDOM 35/50/3000/80 DIRECT","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1504.96"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"2215.71"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"780.18"}]}],"statusHistory":[{}]},{"customerAccountOptionId":"2555044","customerAccountOptionDescription":"OXFORD CONTRACT","customerAccountOptionType":"12 Months","statusCode":"A","statusDescription":"Active","startDate":"2019-01-01","renewalDate":"2020-01-01","terminationDate":"2019-12-31","stateOfIssueCode":"CT","stateOfIssueDescription":"CONNECTICUT","openEnrollmentStartDate":"2018-12-01","openEnrollmentEndDate":"2018-12-31","enrollmentInsuringRulesPopulationIndicator":"false","defineOpenEnrollmentbyPopulationIndicator":"false","customerAccountGroupPopulation":[{"classesCode":"NA","classesDescription":"NA"},{"classesCode":"CTFACTORY","classesDescription":"CTFactory"},{"classesCode":"NA2","classesDescription":"NA2"},{"classesCode":"STLOUIS FACTOR","classesDescription":"StLouis Factor"},{"classesCode":"CTOFFICE","classesDescription":"CTOffice"},{"classesCode":"STLOUIS OFFICE","classesDescription":"StLouis Office"},{"classesCode":"NA3","classesDescription":"NA3"}],"customerAccountInsuringRules":[{"dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"CTFACTORY","classesDescription":"CTFactory","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"STLOUIS FACTOR","classesDescription":"StLouis Factor","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"CTOFFICE","classesDescription":"CTOffice","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"STLOUIS OFFICE","classesDescription":"StLouis Office","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]}],"customerPurchase":[{"memberGroupContractPlanOptionID":"PO100002","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333372","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000172","benefitPlanDescription":"CT FREEDOM  6000/100 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1075.38"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1583.25"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"557.48"}]},{"memberGroupContractPlanOptionID":"PO100003","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333374","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000834","benefitPlanDescription":"CT FREEDOM 3000/70 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1146.40"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1687.81"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"594.30"}]},{"memberGroupContractPlanOptionID":"PO100001","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01",';
         GetEmpGrpRes += '"coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333373","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000167","benefitPlanDescription":"CT FREEDOM 35/50/3000/80 DIRECT","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1504.96"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"2215.71"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"780.18"}]}],"statusHistory":[{}]},{"customerAccountOptionId":"2555044","customerAccountOptionDescription":"OXFORD CONTRACT","customerAccountOptionType":"12 Months","statusCode":"V","statusDescription":"Validation","startDate":"2019-01-01","renewalDate":"2020-01-01","terminationDate":"2019-12-31","stateOfIssueCode":"CT","stateOfIssueDescription":"CONNECTICUT","openEnrollmentStartDate":"2018-12-01","openEnrollmentEndDate":"2018-12-31","enrollmentInsuringRulesPopulationIndicator":"false","defineOpenEnrollmentbyPopulationIndicator":"false","customerAccountGroupPopulation":[{"classesCode":"STLOUIS FACTOR","classesDescription":"StLouis Factor"},{"classesCode":"CTFACTORY","classesDescription":"CTFactory"},{"classesCode":"NA","classesDescription":"NA"},{"classesCode":"NA2","classesDescription":"NA2"},{"classesCode":"STLOUIS OFFICE","classesDescription":"StLouis Office"},{"classesCode":"CTOFFICE","classesDescription":"CTOffice"},{"classesCode":"NA3","classesDescription":"NA3"}],"customerAccountInsuringRules":[{"dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"STLOUIS FACTOR","classesDescription":"StLouis Factor","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"CTFACTORY","classesDescription":"CTFactory","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"STLOUIS OFFICE","classesDescription":"StLouis Office","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]},{"classesCode":"CTOFFICE","classesDescription":"CTOffice","dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2019-01-01","insuringRuleExpirationDates":"2019-12-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"First of the Following Month (FOFM)","qualifyingEvent":"Initial Enrollment"}]}],"customerPurchase":[{"memberGroupContractPlanOptionID":"PO100002","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333372","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000172","benefitPlanDescription":"CT FREEDOM  6000/100 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1075.38"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1583.25"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"557.48"}]},{"memberGroupContractPlanOptionID":"PO100003","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333374","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000834","benefitPlanDescription":"CT FREEDOM 3000/70 DIRECT HSA","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1146.40"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"1687.81"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"594.30"}]},{"memberGroupContractPlanOptionID":"PO100001","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2019-01-01","coverageExpirationDate":"2019-12-31","benefitBundleOptionID":"2333373","timePeriodQualifier":"Calendar Year","benefitBasePlan":"M000000167","benefitPlanDescription":"CT FREEDOM 35/50/3000/80 DIRECT","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"D","amount":"1504.96"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"F","amount":"2215.71"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"780.18"}]}],"statusHistory":[{}]}]}]}}}}';
         //system.debug('------GetEmpGrpRes------'+GetEmpGrpRes);
         MockHttpCalloutResponseGenerator.MockHttpResponse OILResponse = new MockHttpCalloutResponseGenerator.MockHttpResponse(200, 'OK', GetEmpGrpRes);
         OILResponse.TokenExpired = false;
        
            MockHttpCalloutResponseGenerator MockHttpRes = new MockHttpCalloutResponseGenerator(null, OILResponse);
            Test.setMock(HttpCalloutMock.class, MockHttpRes);
          system.debug('------MockHttpRes------'+MockHttpRes);
        // Set mock callout class 
        Test.setMock(HttpCalloutMock.class, MockHttpRes); 
    
        PageReference ACETGroupEligibility = Page.ACETGroupEligibility;

                  
       Test.setCurrentPage(ACETGroupEligibility);        
       //Date effDat = date.today()-2;
       //Date endDat = date.today()+2;
       apexpages.currentpage().getparameters().put('interactionId',inter.id);
       apexpages.currentpage().getparameters().put('groupId','1265004');
       apexpages.currentpage().getparameters().put('SRK', '624482262');
       apexpages.currentpage().getparameters().put('contractId','2555044');
       apexpages.currentpage().getparameters().put('isMemberFlow','true');
       apexpages.currentpage().getparameters().put('filterStatus','Active');
       apexpages.currentpage().getparameters().put('status','Active');
       apexpages.currentpage().getparameters().put('effDate','1/1/2019');
       apexpages.currentpage().getparameters().put('covEffDate','1/1/2019');
       apexpages.currentpage().getparameters().put('covEndDate','12/31/9999');
       apexpages.currentpage().getparameters().put('additionalInfo', '{"Zip":null,"UHCBS":null,"surrogatekey":null,"State":null,"SitusState":null,"ServiceTeam":"Small Group","selectedPolicyContract":"602613","RiskManagement":"No","RenewalDate":null,"RelationshipType":"Primary Benefits Administrator","Relationship":null,"RatingMethod":"","providerType":null,"providerPhoneNumber":null,"ProductType":null,"Product":null,"producerSubject":"Best Buy","producerOriginator":null,"producerName":null,"producerIDPNF":null,"producerId":"4061351","primarySpecialty":null,"PolicyNumber":null,"platinumProvider":null,"PhoneNumber":null,"OriginatorRelationship":"Primary Benefits Administrator","OriginatorDOB":null,"OnshoreIndicatorVerbiage":null,"OnshoreIndicator":null,"Network":null,"MemberId":null,"LastName":null,"isProducerNotFound":null,"isMemNotFound":null,"isMember":null,"isGroupNotFound":null,"isGroup":null,"hsaPlan":null,"GroupStatus":null,"groupSName":null,"GroupNumber":null,"GroupName":null,"GroupN":"4061351 - Best Buy","groupFlowGroupNumber":"4061351","groupFlowGroupName":"Best Buy","Gender":null,"FirstName":null,"EndDate":null,"EmployerName":null,"EffectiveStartDate":"1/1/2018","EffectiveDate":null,"DOB":null,"contactName":"Josee Morin","ConsumerAccountIndicator":null,"BenefitPlanId":null,"BenefitBundleOptionId":null}');
       
               
       ACETGroupEligibilityController groupEligibility= new ACETGroupEligibilityController();     
       groupEligibility.subject=contactRec;
       ACETGroupEligibilityController.callwebservice('1265004');
       groupEligibility.showPolicyContract();
       groupEligibility.getInsuringRules();      
       groupEligibility.insuringRulesSelection();
       groupEligibility.getGroupInsuringRules();
       
       ACETGroupDetail gd = new ACETGroupDetail();
        
       ACETGroupDetail.GroupInsuringSettings gis = new ACETGroupDetail.GroupInsuringSettings();
        list<ACETGroupDetail.GroupInsuringSettings > gisList = new list<ACETGroupDetail.GroupInsuringSettings >();
        gis.classesCode = '';
        gis.continuationResponsibilityType= 'Test';
        gis.insuranceContinuationType= 'Test';
        gis.onshoreRestriction= 'Test user';
        gis.insuringRulesEffectiveDates= '1/1/2019';
        gis.insuringRulesExpirationDates = '12/31/2019';
        gis.pcpRadomization= 'Test';
        gis.survivingSpouseIndicator= 'Test';
        gis.newBornAutoAddIndicator= 'Test';
        gis.countNewbornForCoverageLevelCodeIndicator= 'Test user';
        gis.earlyRetirement= 'Test';
        gis.workingRetirement= 'Test';
        gisList.add(gis);
        
        gd.groupInsuringSettings = gisList;
       Test.stopTest();
       
    }
    static testMethod void GroupEligibilityControllerTestConOptPopNoPop() 
    {     
        Map<String, String> mapISLWSConfigs = new Map<String, String>(); 
        mapISLWSConfigs.put('ISLConAccessToken', 'e9b3f2b1-8863-49ec-9ff8-40da25961ef5');
        mapISLWSConfigs.put('OILHttpHeaderAccept', 'application/json;charset=UTF-8');
        mapISLWSConfigs.put('OILHttpHeaderActor', 'ACET');
        mapISLWSConfigs.put('OILHttpHeaderScope', 'read'); 
        mapISLWSConfigs.put('ISLOAuthContentType', 'application/x-www-form-urlencoded');
        mapISLWSConfigs.put('ISLOAuthGrantType', 'client_credentials');
        mapISLWSConfigs.put('dev_ISLOAuthClientId', 'ISLStageConClientId');
        mapISLWSConfigs.put('dev_ISLOAuthClientSecret', 'ISLStageConClientSecret');
        mapISLWSConfigs.put('dev_ISLOAuthEndpoint', 'https://api-stg.optum.com:8443');
        mapISLWSConfigs.put('dev_GetMedicalProviderEndpoint', '/api/test/eisl/providers/v1.0/medicalprovider/read');
        mapISLWSConfigs.put('dev_ISLOAuthTokenEndpoint', '/auth/oauth/v2/token');
        mapISLWSConfigs.put('OILTimeout', '3000');
        
        List<ISL_Webservice_Config__c> lstISLWSConfigs = ACETTestDataUtility.CreateISLWebserviceConfigurations(mapISLWSConfigs);
        insert lstISLWSConfigs;
        
        Map<String, Integer> mapOnshoreVerbgs = new Map<String, Integer>(); 
        mapOnshoreVerbgs.put('All Services Onshore except IT',01);
        mapOnshoreVerbgs.put('Claim Transactions',02);
        mapOnshoreVerbgs.put('All Services Onshore',08);
        List<ACETOnshoreIndicatorVerbiage__c> lstOnshoreVerbgs = ACETTestDataUtility.CreateOnshoreVerbiages(mapOnshoreVerbgs);
        insert lstOnshoreVerbgs;
         
          RecordType newRecord = [SELECT Id FROM RecordType WHERE Name = 'Person Account' and SObjectType = 'Account'];
        
        Account accountTest = new Account();
        accountTest.FirstName = 'Test';
        accountTest.LastName = 'Contact';
        accountTest.EID__c = 'PIN';
        accountTest.EID__pc = 'PIN';
        accountTest.RecordTypeId = newRecord.Id;
        insert accountTest;

    Account acc = [SELECT Id,personcontactid from Account where Id=:accountTest.Id];
        Contact contactRec = [SELECT Id,LastName,FirstName,Name,EID__c,AccountId from Contact where Id=:acc.personcontactid];
            
          Interaction__c inter = ACETProviderUtility.CreateInteraction(contactRec.Id,'Phone','',ContactRec.name);
          inter.Highlight_Panel_GroupInfo__c='{"UHCBS":"YES","ServiceTeam":"National Accounts","RiskManagement":"Audit","RenewalDate":"4/6/2018","RelationshipType":null,"RatingMethod":"","GroupStatus":"Active","groupSName":"37E9769CORG1","GroupName":"1068479- 37E9769CORG1","EffectiveStartDate":"4/6/2017"}';
          insert inter;
    
       Test.startTest();
         String GetEmpGrpRes = '{"getEmployerGroup":{"getEmployerGroupResponse":{"employerGroup":{"groupNumber":"1128476","groupName":"NICKSON INDUSTRIES","sourceSysCode":"CIRRUS","taxIdentificationNumber":["264580447"],"sizeDefinitionCode":"02","sizeDefinitionDescription":"Large Business","enrollmentType":"Paper Only","parentGroup":{"id":"0"},"alphaParentGroup":{"id":"1128476","name":"NICKSON INDUSTRIES"},"riskManagementIndicator":"false","erisaIndicator":"true","groupLevelHoldIndicator":"false","groupLevelHold":[{"groupHoldCode":"MIG_EL","groupHoldShortDescription":"Migration Eligibility Hold","groupHoldEffectiveDates":"2018-06-13","groupHoldExpirationDates":"2018-07-03","groupHoldTransactionDate":"2018-07-03","groupHoldCreatedByUserId":"SYSTEM"},{"groupHoldCode":"MGCTCH","groupHoldShortDescription":"Contract Change","groupHoldEffectiveDates":"2018-08-09","groupHoldExpirationDates":"2018-08-09","groupHoldTransactionDate":"2018-08-09","groupHoldCreatedByUserId":"SYSTEM"},{"groupHoldCode":"MIG_FF","groupHoldShortDescription":"Migration Fulfillment Hold","groupHoldEffectiveDates":"2018-06-13","groupHoldExpirationDates":"2018-09-28","groupHoldTransactionDate":"2018-09-29","groupHoldCreatedByUserId":"SYSTEM"},{"groupHoldCode":"MIG_ID","groupHoldShortDescription":"Migration Hold ID Cards","groupHoldEffectiveDates":"2018-06-13","groupHoldExpirationDates":"2018-08-15","groupHoldTransactionDate":"2018-08-15","groupHoldCreatedByUserId":"SYSTEM"}],"groupSettings":[{"cobAttestationFrequency":"0","cobAttestationDenyGracePeriod":"0","effectiveDate":"2018-09-01","expirationDate":"9999-12-31"}],"groupAddress":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America","salesOfficeCode":"339","salesOfficeDescription":"Hartford/oth","effectiveDate":"2018-09-01","expirationDate":"9999-12-31"}],"groupContact":[{"roleType":"8","roleDescription":"SBC Contact","primaryIndicatorCode":"false",';
         GetEmpGrpRes += '"primaryIndicatorDescription":"Secondary","firstName":"GAYAME","lastName":"MATZKIN","startDate":"2018-09-01","endDate":"9999-12-31","email":[{"communicationTypeCode":"EML","electronicAddress":"gmatzkin@nickson.com"}],"address":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"},{"addressTypeCode":"B","addressTypeDescription":"Billing","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"}]},{"roleType":"1","roleDescription":"Benefit Administrator","primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"GAYAME","lastName":"MATZKIN","startDate":"2018-09-01","endDate":"9999-12-31","email":[{"communicationTypeCode":"EML","electronicAddress":"gmatzkin@nickson.com"}],"address":[{"addressTypeCode":"PHY","addressTypeDescription":"Physical Address","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"},{"addressTypeCode":"B","addressTypeDescription":"Billing","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"}]},{"roleType":"2","roleDescription":"Billing Contact","primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"OZLEN","lastName":"TASDELEN","startDate":"2018-09-01","endDate":"9999-12-31","address":[{"addressTypeCode":"B","addressTypeDescription":"Billing","addressLine1":"336 WOODFORD AVE","addressCity":"PLAINVILLE","addressPostalCode":"06062","addressStateCode":"CT","addressCountryCode":"US","addressCountryDescription":"United States of America"}]},{"roleType":"8","roleDescription":"SBC Contact",';
         GetEmpGrpRes += '"primaryIndicatorCode":"true","primaryIndicatorDescription":"Primary","firstName":"KOBRYN","lastName":"KERI","startDate":"2018-09-01","endDate":"9999-12-31","email":[{"communicationTypeCode":"EML","electronicAddress":"kkobryn@rogersbenefit.com"}]}],"groupSupportTeamContact":[{"roleType":"DCSM","roleDescription":"Dedicated Client Service Manager","startDate":"2018-09-01","endDate":"9999-12-31"}],"groupInsuringRules":[{"cobraAdministrativeIndicator":"0","insuranceContinuationType":"No Continuation","onshoreRestriction":"All Services Onshore","insuringRulesEffectiveDates":"2017-06-12","insuringRulesExpirationDates":"2017-12-31","pcpRadomization":"01","survivingSpouseIndicator":"false","newBornAutoAddIndicator":"true","countNewbornForCoverageLevelCodeIndicator":"false"},{"cobraAdministrativeIndicator":"0","continuationResponsibilityType":"Member Group","insuranceContinuationType":"COBRA","onshoreRestriction":"All Services Onshore except IT","insuringRulesEffectiveDates":"2018-09-01","insuringRulesExpirationDates":"9999-12-31","pcpRadomization":"01","survivingSpouseIndicator":"false","newBornAutoAddIndicator":"true","countNewbornForCoverageLevelCodeIndicator":"false"}],"customerAccount":[{"planBillingGroupNumber":"1002 1001 1004 1003","originalContractDate":"2017-09-01","migrationIndicator":"true","customerAccountOption":[{"customerAccountOptionId":"80501","customerAccountOptionDescription":"NICKSON INDUSTRIES","customerAccountOptionType":"12 Months","statusCode":"I","statusDescription":"Inactive","startDate":"2018-09-01","renewalDate":"2019-09-01","terminationDate":"2019-08-31","stateOfIssueCode":"CT","stateOfIssueDescription":"CONNECTICUT","openEnrollmentStartDate":"2018-08-01","openEnrollmentEndDate":"2018-08-31","enrollmentInsuringRulesPopulationIndicator":"false","defineOpenEnrollmentbyPopulationIndicator":"false","customerAccountGroupPopulation":[],"customerAccountInsuringRules":[{"dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","waiveRehiredWithinCount":"1","waiveRehiredWithinType":"M","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2018-09-01","insuringRuleExpirationDates":"2019-08-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"FOFM after Specified Duration","waitingDurationType":"Days","waitingDurationValue":"60","qualifyingEvent":"Initial Enrollment"}]}],"customerPurchase":[{"memberGroupContractPlanOptionID":"360503","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2018-09-01","coverageExpirationDate":"2019-08-31","benefitBundleOptionID":"1648486","timePeriodQualifier":"Contract Year","benefitBasePlan":"M000000809","benefitPlanDescription":"CT FREEDOM  2850/90 DIRECT HSA","gatedProductIndicator":"0","lineOfBusiness":[{"name":"Small Business Expanded","description":"Small Business Expanded - (UHC definition = 51 to 100)"},{"name":"Key Account","description":"Key Account - (UHC definition = 101  2999 NonPublic & Public and >2,999 NonPublic HMO)"}],"hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"C","amount":"1001.56"},{"ratingMethodology":"02","contractTypeCode":"4","contractTypeDescription":"F","amount":"1419.54"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"490.00"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"PCH","amount":"812.91"}]},{"memberGroupContractPlanOptionID":"130501","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2018-09-01","coverageExpirationDate":"2019-08-31","benefitBundleOptionID":"1688476","timePeriodQualifier":"Contract Year","benefitBasePlan":"M000000093","benefitPlanDescription":"CT FREEDOM 2850/100 HMO DIRECT HSA 100/100","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"4","contractTypeDescription":"F","amount":"1361.13"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"469.84"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"PCH","amount":"779.46"},{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"C","amount":"960.35"}]}],"statusHistory":[{}]},{"customerAccountOptionId":"80501","customerAccountOptionDescription":"NICKSON INDUSTRIES","customerAccountOptionType":"12 Months","statusCode":"A","statusDescription":"Active","startDate":"2018-09-01","renewalDate":"2019-09-01","terminationDate":"2019-08-31","stateOfIssueCode":"CT","stateOfIssueDescription":"CONNECTICUT","openEnrollmentStartDate":"2018-08-01","openEnrollmentEndDate":"2018-08-31","enrollmentInsuringRulesPopulationIndicator":"false","defineOpenEnrollmentbyPopulationIndicator":"false","customerAccountInsuringRules":[{"dependentCutOff":"26","dependentCutOffType":"Last Day of Plan Year","studentMaximumAge":"26","studentmaximumAgeType":"Last Day of Plan Year","waiveRehiredIndefiniteIndicator":"false","waiveWaitingPeriodForNewHireIndicator":"false","waiveRehiredWithinCount":"1","waiveRehiredWithinType":"M","terminationLagType":"001","terminationLagDescription":"Date of Event","overrideRetroBenefitAddIndicator":"false","overrideRetroBenefitAddDays":"","overrideRetroBenefitChangeIndicator":"false","overrideRetroBenefitTerminationIndicator":"false","insuringRuleEffectiveDates":"2018-09-01","insuringRuleExpirationDates":"2019-08-31","nonStandardWaitingPeriodIndicator":"false","waitingPeriodRules":[{"waitingPeriodType":"Date of Event","qualifyingEvent":"Adoption"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Benefit Selection"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Birth"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"COBRA"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Late Enrollee"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Marriage"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Plan Change"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Re-enrollment"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Rehire"},{"waitingPeriodType":"Date of Event","qualifyingEvent":"Special Enrollment"},{"waitingPeriodType":"FOFM after Specified Duration","waitingDurationType":"Days","waitingDurationValue":"60","qualifyingEvent":"Initial Enrollment"}]}],"customerPurchase":[{"memberGroupContractPlanOptionID":"360503","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2018-09-01","coverageExpirationDate":"2019-08-31","benefitBundleOptionID":"1648486","timePeriodQualifier":"Contract Year","benefitBasePlan":"M000000809","benefitPlanDescription":"CT FREEDOM  2850/90 DIRECT HSA","gatedProductIndicator":"0","lineOfBusiness":[{"name":"Small Business Expanded","description":"Small Business Expanded - (UHC definition = 51 to 100)"},{"name":"Key Account","description":"Key Account - (UHC definition = 101  2999 NonPublic & Public and >2,999 NonPublic HMO)"}],"hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"C","amount":"1001.56"},{"ratingMethodology":"02","contractTypeCode":"4","contractTypeDescription":"F","amount":"1419.54"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"490.00"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"PCH","amount":"812.91"}]},{"memberGroupContractPlanOptionID":"130501","fundingArrangementCode":"01","fundingArrangementDescription":"Fully Insured","coverageStartDate":"2018-09-01","coverageExpirationDate":"2019-08-31","benefitBundleOptionID":"1688476","timePeriodQualifier":"Contract Year","benefitBasePlan":"M000000093","benefitPlanDescription":"CT FREEDOM 2850/100 HMO DIRECT HSA 100/100","gatedProductIndicator":"0","hsaVendorId":"0","networkScheduleId":["FREEDOM_CHOICEPLUS"],"domesticPartnerIndicator":"false","benefitServiceArea":"OXFORD_TRI_STATE","billingSchedule":[{"ratingMethodology":"02","contractTypeCode":"4","contractTypeDescription":"F","amount":"1361.13"},{"ratingMethodology":"02","contractTypeCode":"1","contractTypeDescription":"S","amount":"469.84"},{"ratingMethodology":"02","contractTypeCode":"3","contractTypeDescription":"PCH","amount":"779.46"},{"ratingMethodology":"02","contractTypeCode":"2","contractTypeDescription":"C","amount":"960.35"}]}],"statusHistory":[{}]}]}]}}}}';
    
         MockHttpCalloutResponseGenerator.MockHttpResponse OILResponse = new MockHttpCalloutResponseGenerator.MockHttpResponse(200, 'OK', GetEmpGrpRes);
         OILResponse.TokenExpired = false;
        
            MockHttpCalloutResponseGenerator MockHttpRes = new MockHttpCalloutResponseGenerator(null, OILResponse);
            Test.setMock(HttpCalloutMock.class, MockHttpRes);
        
        // Set mock callout class 
        Test.setMock(HttpCalloutMock.class, MockHttpRes); 
    system.debug('------MockHttpRes------'+MockHttpRes);
        PageReference ACETGroupEligibility = Page.ACETGroupEligibility;

                  
       Test.setCurrentPage(ACETGroupEligibility);        
       //Date effDat = date.today()-2;
       //Date endDat = date.today()+2;
       apexpages.currentpage().getparameters().put('interactionId',inter.id);
       apexpages.currentpage().getparameters().put('groupId','1128476');
       apexpages.currentpage().getparameters().put('SRK', '624482262');
       apexpages.currentpage().getparameters().put('contractId','80501');
       apexpages.currentpage().getparameters().put('isMemberFlow','true');
       apexpages.currentpage().getparameters().put('filterStatus','Active');
       apexpages.currentpage().getparameters().put('status','Active');
       apexpages.currentpage().getparameters().put('effDate','9/1/2018');
       apexpages.currentpage().getparameters().put('covEffDate','9/1/2018');
       apexpages.currentpage().getparameters().put('covEndDate','8/31/2019');
       apexpages.currentpage().getparameters().put('additionalInfo', '{"Zip":null,"UHCBS":null,"surrogatekey":null,"State":null,"SitusState":null,"ServiceTeam":"Small Group","selectedPolicyContract":"602613","RiskManagement":"No","RenewalDate":null,"RelationshipType":"Primary Benefits Administrator","Relationship":null,"RatingMethod":"","providerType":null,"providerPhoneNumber":null,"ProductType":null,"Product":null,"producerSubject":"Best Buy","producerOriginator":null,"producerName":null,"producerIDPNF":null,"producerId":"4061351","primarySpecialty":null,"PolicyNumber":null,"platinumProvider":null,"PhoneNumber":null,"OriginatorRelationship":"Primary Benefits Administrator","OriginatorDOB":null,"OnshoreIndicatorVerbiage":null,"OnshoreIndicator":null,"Network":null,"MemberId":null,"LastName":null,"isProducerNotFound":null,"isMemNotFound":null,"isMember":null,"isGroupNotFound":null,"isGroup":null,"hsaPlan":null,"GroupStatus":null,"groupSName":null,"GroupNumber":null,"GroupName":null,"GroupN":"4061351 - Best Buy","groupFlowGroupNumber":"4061351","groupFlowGroupName":"Best Buy","Gender":null,"FirstName":null,"EndDate":null,"EmployerName":null,"EffectiveStartDate":"1/1/2018","EffectiveDate":null,"DOB":null,"contactName":"Josee Morin","ConsumerAccountIndicator":null,"BenefitPlanId":null,"BenefitBundleOptionId":null}');
       
               
       ACETGroupEligibilityController groupEligibility= new ACETGroupEligibilityController();     
       groupEligibility.subject=contactRec;
       ACETGroupEligibilityController.callwebservice('1128476');
       groupEligibility.showPolicyContract();
       groupEligibility.getInsuringRules();      
       groupEligibility.insuringRulesSelection();
       groupEligibility.getGroupInsuringRules();
       
       ACETGroupDetail gd = new ACETGroupDetail();
        
       ACETGroupDetail.GroupInsuringSettings gis = new ACETGroupDetail.GroupInsuringSettings();
        list<ACETGroupDetail.GroupInsuringSettings > gisList = new list<ACETGroupDetail.GroupInsuringSettings >();
        gis.classesCode = '';
        gis.continuationResponsibilityType= 'Test';
        gis.insuranceContinuationType= 'Test';
        gis.onshoreRestriction= 'Test user';
        gis.insuringRulesEffectiveDates= '9/1/2018';
        gis.insuringRulesExpirationDates = '8/31/2019';
        gis.pcpRadomization= 'Test';
        gis.survivingSpouseIndicator= 'Test';
        gis.newBornAutoAddIndicator= 'Test';
        gis.countNewbornForCoverageLevelCodeIndicator= 'Test user';
        gis.earlyRetirement= 'Test';
        gis.workingRetirement= 'Test';
        gisList.add(gis);
        
        gd.groupInsuringSettings = gisList;
       Test.stopTest();
       
    }
}