@isTest
public class ADBLastCallControllerTest {
    @testSetup static void setup() {
        Test.startTest();
        List<WebserviceConfigurations__c> configs = new List<WebserviceConfigurations__c>{
            new WebserviceConfigurations__c(Name = 'ORSSelectIssue',recordtypeText__c = 'Token_API', Method__c = 'POST', Timeout__c = 10000),
                new WebserviceConfigurations__c(Name = 'ORSReadIssueMicroService',recordtypeText__c = 'Token_API', Method__c = 'POST', Timeout__c = 10000)
                };
                    insert configs;
        
        List<OrgSpecificConfigurations__c> orgConfigs = new List<OrgSpecificConfigurations__c>{
            new OrgSpecificConfigurations__c(WebserviceConfigurations__c = configs[0].Id,recordtypeText__c = 'TokenAPI', Name = 'QA', EndpointDomain__c = 'https://gateway-stage.optum.com/api/stage/ccs/ci/issues/v1/search'),
                new OrgSpecificConfigurations__c(WebserviceConfigurations__c = configs[1].Id,recordtypeText__c = 'TokenAPI', Name = 'QA', EndpointDomain__c = 'https://gateway-stage.optum.com/api/stage/ccs/ci/issues/v1/read')
                };
                    insert orgConfigs;
        
        Organization_Properties__c property = new Organization_Properties__c(OrganizationName__c = 'QA');
        insert property;
        Test.stopTest();
    }
    @isTest static void testSelectIssue (){
        String memberId = '474706605';
        String officeId = '673';
        String logonId = 'JR2';
        test.startTest();
        
        StaticResourceCalloutMock mock = new StaticResourceCalloutMock();
        mock.setStaticResource('ACETSelectIssueMockResponse');
        mock.setStatusCode(200);
        // Set the mock callout mode
        Test.setMock(HttpCalloutMock.class, mock);
        ADBLastCallController.getSelectIssues(memberId, officeId,logonId);
        test.stopTest(); 
    } 
    @isTest static void testReadIssue (){
        String memberId = '474706605';
        String issueId = 'D01181129265332';
        String officeId = '673';
        String logonId = 'JR2';
        test.startTest();
        StaticResourceCalloutMock mock = new StaticResourceCalloutMock();
        mock.setStaticResource('ACETReadIssueMockResponse');
        mock.setStatusCode(200);
        // Set the mock callout mode
        Test.setMock(HttpCalloutMock.class, mock);
        ADBLastCallController.getReadIssueDetails(memberId, issueId, officeId,logonId);
        test.stopTest(); 
    }
    @isTest static void  testADBSelectIssuesResponseWrapper(){
        test.startTest();
        String val = '{"searchResult":{"searchOutput":{"issuesList":[{"issueId":"D01181129265332","reasonCode":"ICOB","contactReasonDescription":"COB                      ","statusCode":"H","status":"HOLD","contactMethodCode":"P","contactMethodDescription":"PHONE","originatorTypeCode":"EM","originatorTypeDescription":"MEMBER","originatedDate":"2020-04-27","originatedTime":"11:29:00","comment":"{{** OTHER SECTION: BUSINESS ALERTS VIEWED FOR TERRI ANDERSON ON 04-2","updateDate":"2020-04-27","associateName":{"firstName":"CHARLI","lastName":"ANNUNZIATA"},"businessSegmentName":"HLTHADVR","subReasonText":"","complaintCategoryText":"","reasonCategory":"","followupStatusCode":"O","followupStatusDescription":"OPEN","followupPurposeCode":"H","claimNumber":"","claimAuthorization":"","claimServiceDate":"","claimCount":"00","hippa":"N","extrClaimNumber":"","extrSubscriberId":"","origOfficeNumber":"673","ownerOfficeId":"000","ownerDepartmentCode":"","memberInfo":{"dependentName":{"firstName":"TERRI","lastName":""},"groupNumber":"000000000","groupName":"BOY SCOUTS OF AMERIC","product":"","memberNumber":"474706605","policy":"0136003","alternateId":"965627902","eligibilitySourceSystem":"U","primaryPolicyNumber":"","sharedArrangementId":"00","obligorId":"01","logoIndicator":"","fontIndicator":"","planCode":"","benefitPackageCode":"","regionCode":"","ipaCode":"","panelCode":"","source":"EM"},"providerInfo":{"productCode":"","panelNumber":"","ipa":"","sourceSystem":"","firstInitial":"","lastName":"","mpin":""},"originatorInfo":{"originatorMPIN":"000000000000","originatorTIN":"000000000","originatorSuffix":"00000","originatorId":"C98"},"otherInfo":{"agencyName":"","agencyTaxId":"","agencyUniqueId":"00000000000"},"serviceRequest":{"srProductType":"MD","srType":"","srSubType":""}},{"issueId":"D00941522527207","reasonCode":"CCAP","contactReasonDescription":"CLAIM WAS PAIDPROCESSED","statusCode":"C","status":"CLOSED","contactMethodCode":"P","contactMethodDescription":"PHONE","originatorTypeCode":"EM","originatorTypeDescription":"MEMBER","originatedDate":"2020-04-03","originatedTime":"15:22:00","comment":"809-9098ADDEDUPDATEDFORJAIMECAMPOS**","updateDate":"2020-04-17","associateName":{"firstName":"CHARLI","lastName":"ANNUNZIATA"},"businessSegmentName":"HLTHADVR","subReasonText":"","complaintCategoryText":"","reasonCategory":"","followupStatusCode":"","followupStatusDescription":"NONE","followupPurposeCode":"","claimNumber":"","claimAuthorization":"","claimServiceDate":"","claimCount":"00","hippa":"N","extrClaimNumber":"","extrSubscriberId":"","origOfficeNumber":"673","ownerOfficeId":"000","ownerDepartmentCode":"","memberInfo":{"dependentName":{"firstName":"TERRI","lastName":""},"groupNumber":"000000000","groupName":"BOY SCOUTS OF AMERIC","product":"","memberNumber":"474706605","policy":"0136003","alternateId":"965627902","eligibilitySourceSystem":"U","primaryPolicyNumber":"","sharedArrangementId":"00","obligorId":"05","logoIndicator":"","fontIndicator":"","planCode":"","benefitPackageCode":"","regionCode":"","ipaCode":"","panelCode":"","source":"EM"},"providerInfo":{"productCode":"","panelNumber":"","ipa":"","sourceSystem":"","firstInitial":"","lastName":"","mpin":""},"originatorInfo":{"originatorMPIN":"000000000000","originatorTIN":"000000000","originatorSuffix":"00000","originatorId":"C98"},"otherInfo":{"agencyName":"","agencyTaxId":"","agencyUniqueId":"00000000000"},"serviceRequest":{"srProductType":"MD","srType":"","srSubType":""}}],"alertsList":[],"pagingState":{"moreData":false}}}}';
        ADBSelectIssuesResponseWrapper.parse(val);
        test.stopTest();
    } 
    @isTest static void  testADBReadIssueDetailsResponseWrapper(){
        test.startTest();
        String val = '{"issue":{"issueId":"D01181129265332","updateDate":"2020-04-27","updateTime":"11:29:26","priority":"N","repeatIndicator":"1","contactMethodCode":"P","originatorTypeCode":"EM","directionCode":"I","status":"H","surveyCode":"","callHistoryFlag":"","callbackPromisedDate":"","followupDate":"","businessSegmentName":"HLTHADVR","routeConditionCode":"00000","hipaaIndicator":"N","reasonCode":"ICOB","reasonType":"03","reasonCategory":"ELI","reasonHcnasType":"","subReasonText":"","complaintCategoryText":"","launchCategoryText":"","launchReasonText":"","grievanceCategoryText":"","grievanceReasonText":"","grievanceReasonCode":"","grievanceReceiptDate":"","grievanceDispositionText":"","dispositionNotificationDate":"","campaignCode":"","campaignReportText":"","pssActionTaken":"","callAttemptDetailText":"","callProgramName":"","pharmacyClassText":"","pharmacyClaimNumber":"","pharmacyName":"","pharmacyId":"","assignedPssId":"","callMeetsExpectationIndicator":"","callExceedsExpectationIndicator":"","disposition":"","checkNumber":"","seriesDesignator":"","caseNumber":"","payer":"","member":{"zipCode":"55117","dependentName":{"firstName":"TERRI","lastName":"ANDERSON"},"dependentNumber":"000","memberName":{"firstName":"TERRI","lastName":"ANDERSON"},"memberNumber":"474706605","groupName":"BOY SCOUTS OF AMERIC","groupNumber":"3136003","relationshipCode":"EE","relationship":"0","relationshipSequenceNumber":"001","customerNumber":"1136003","product":"","market":"22700","legalEntity":"","policy":"0136003","planVariationCode":"","reportingCode":"","alternateId":"965627902","eligibilitySourceSystem":"U","division":"","masterGroupNumber":"","faxNumber":"","email":"","logonId":"","site":"","leadPlanCode":"","personalIdentificationNumber":"314582724","primaryPolicyNumber":"","sharedArrangementId":"00","obligorId":"01","eligibilityValidatedFlag":"","otherSubscriberId":"","statusCode":"","medicareId":"","medicaidId":"","premiumWithholdCode":"","coverageIndicator":"","totalNonCoverageCount":"000","subsidyOverrideIndicator":"","optOutIndicator":"","enrollmentSourceCode":"","secondaryDrugInsuranceIndicator":"","lisPctCode":"","copayEffectiveDate":"","ssaPaymentCode":"","logoIndicator":"","fontIndicator":"","stateCode":"","countryCode":"","genderCode":"","verbalLanguageName":"","writtenLanguageName":"","emailIndicator":"","raceEthnicityCode":"","dateOfBirth":"","age":"000","originalEffectiveDate":"","assignedCsrName":"","dateOfDeath":"","medicareStatusCode":"","dlEligIndicator":"","pcpOverrideIndicator":"","planCode":"","benefitPackageCode":"","regionCode":"","ipaCode":"","panelCode":"","riderCodeIndicator":"","riderCodes":["","","","","","","",""],"meetingTypeName":"","meetingDate":"","ambulanceIndicator":"","chiropracticServiceQuoted":"","cosmeticServiceQuoted":"","cataractSurgeryBenefitsQuoted":"","deductibleServiceQuoted":"","diabeticEducationServiceQuoted":"","diabeticMonitorAndSuppliesServiceQuoted":"","diagnosticAndRadiologyServiceQuoted":"","diagnosticLaboratoryServiceQuoted":"","durableMedicalEquipmentServiceQuoted":"","emergencyAndUrgentCareServiceQuoted":"","familyPlanningServiceQuoted":"","hearingExamServiceQuoted":"","homeHealthServiceQuoted":"","immunizationsServiceQuoted":"","inpatientHospitalAndMedicalServiceQuoted":"","inpatientMentalHealthServiceQuoted":"","medicareCoveredDentalServiceQuoted":"","nonRadiologyAndTherapeuticServiceQuoted":"","orthoticsAndProstheticsServiceQuoted":"","maxOutOfPocketQuoted":"","outpatientSurgeryAndObservationServiceQuoted":"","outpatientMentalHealthServiceQuoted":"","outpatientRehabilitationServiceQuoted":"","passportIndicator":"","pcpOfficeVisitServiceQuoted":"","preventiveScreeningServiceQuoted":"","csrProgramServiceQuoted":"","renalDialysisServiceQuoted":"","skilledNursingServiceQuoted":"","transplantServiceQuoted":"","specialistOfficeVisitServiceQuoted":"","oonBenefitServiceQuoted":"","visionBenefitServiceQuoted":"","bloodServiceQuoted":"","podiatryBenefitsServiceQuoted":"","alternativeAndHolisticMedicineServiceQuoted":"","careManagementProgramServiceQuoted":"","custodialCareServiceQuoted":"","valueAddedServiceServiceQuoted":"","dentalServiceQuoted":"","healthyLivingProgramsServiceQuoted":"","hearingServiceQuoted":"","gymMembershipServiceQuoted":"","otcSuppliesServiceQuoted":"","transportationServiceQuoted":"","riderBenefitsServiceQuoted":"","memberMeetingsServiceQuoted":"","brandDrugsServiceQuoted":"","genericDrugsServiceQuoted":"","mailOrderServiceQuoted":"","maxLimitationsServiceQuoted":"","partBDrugsServiceQuoted":"","pharmacyLocatorServiceQuoted":"","preferredFormularyServiceQuoted":"","unfundedProgramsServiceQuoted":"","trueOopServiceQuoted":"","clientCode":"","networkPrefixCode":"","memberVerifiedIndicator":"","facetPlanCode":"","otherProduct":"","otherGroupNumber":"0","infNum":"1136003"},"claim":{"totalAmount":"0.00","authorization":"","claimNumber":"0000000000","invoiceNumber":"","serviceDate":"","filmNumber":"000000000000000000","filmSystem":"","filmOffice":"","payLocationNumber":"151","engineCode":"C","claimApp":"","claimAppSsn":"000000000","claimOffice":"000","claimOfficeName":"0","fundingArrangement":""},"originator":{"dialedId":"0000000000","autoId":"0000000000","icrCallLocationId":"","icrCallLocationDay":"","originatorMpin":"000000000000","originatorTin":"","originatorTinSuffix":"","callerAddress":{"street1":"305 COTTAGE AVE W, APT #312","city":"ST PAUL","state":"MN","zip":"55117","zip4":""},"callerName":{"firstName":"TERRI","lastName":"ANDERSON"},"dayPhone":{"areaCode":"651","number":"2141267","extension":"0000"},"eveningPhone":{"areaCode":"000","number":"0000000","extension":"0000"}},"provider":{"productCode":"","panelNumber":"","contractNumber":"0","ipa":"00000","marketSegmentName":"","serviceMarket":"","serviceZip":"00000","providerSourceSystem":"","providerValidatedFlag":"","pcpValidatedFlag":"","stateIssuedID":"","languageCode":"","originalEffectiveDate":"","statusCode":"","emailIndicator":"","otherIpa":"","pcp":{"firstInitial":"","lastName":"","mpin":"000000000","mpinSequenceNumber":"000","taxPrefix":"","taxId":"000000000","taxSuffix":"00000","state":"","zip":"00000"},"provider":{"firstInitial":"","lastName":"","mpin":"000000000","mpinSequenceNumber":"000","taxPrefix":"","taxId":"000000000","taxSuffix":"00000","state":"","zip":"0"}},"other":{"incompleteFlag":"N","qaCategory":"","qaCodeType":"","qaSource":"","qitType":"","company":"C","lineType":"","insuranceCompany":"","complState":""},"employerInfo":{"employerNumber":"","employerName":"","employerState":""},"serviceRequest":{"srProductType":"MD","srType":"","srSubType":"","resolutionCode":"","clientId":"","subCodeId":"","productId":"","diamondProviderLocationId":"","diamondProviderLocationName":"","originatorLocationId":"","claimAdjustmentRequiredIndicator":"","addressUpdateRequiredIndicator":"","wbxUpdateRequiredIndicator":"","bulkCheckIndicator":"","memberPhoneNumber":"","memberAreaCode":"","memberCity":"","memberStreet1":"","memberStreet2":"","parentGroupName":"","pcpFirstName":"","pcpLastName":"","pcpProviderID":"","hippaEligibleFlag":"","providerFirstName":"","providerLastName":"","providerPhoneNumber":"","providerAreaCode":"","providerCounty":"","checkPayee":"","checkStockNumber":"","commonProviderId":"","originalProviderId":"","providerStreet1":"","providerStreet2":"","providerCity":"","policyNumber":"","dayExtensionNew":"0","documentControlNumber":"","closeOfficeNumber":"0","closeDepartmentCode":"","closeTeamCode":"","lastUpdateOpid":""},"priorityDescription":"NORMAL PRIORITY","contactMethodDescription":"PHONE","originatorTypeDescription":"MEMBER","statusDescription":"HOLD","callRequired":"N","contactReasonDescription":"COB                      ","detailComments":[{"headerNumber":"0999","commentNumber":"0000","type":"NW","date":"2020-04-27","time":"11:29:26","text":"ORS SYSTEM SYSTEMS (LOCAL) RNEST SOS CHARLI ANNUNZIATA ","userId":"673C98"},{"headerNumber":"0999","commentNumber":"0001","type":"EN","date":"2020-04-27","time":"11:29:26","text":"{{** OTHER SECTION: BUSINESS ALERTS VIEWED FOR TERRI ANDERSON ON 04-27","userId":""},{"headerNumber":"0999","commentNumber":"0002","type":"EN","date":"2020-04-27","time":"11:29:26","text":"2020  **}}                                                             ","userId":""}],"followupStatusCode":"O","followupStatusDescription":"OPEN","followupPurposeCode":"H","followupPurposeDescription":"HA - Eligibility Correction","originatedDate":"2020-04-27","owners":[{"officeId":"673","associateId":"C98","departmentCode":"SYS","teamCode":"SOS","associateName":{"firstName":"CHARLI","lastName":"ANNUNZIATA"},"officeName":"ORS SYSTEM","departmentName":"SYSTEMS (LOCAL)","teamName":"RNEST SOS","type":"Current","headerNumber":"0999"},{"officeId":"673","associateId":"C98","departmentCode":"SYS","teamCode":"SOS","associateName":{"firstName":"CHARLI","lastName":"ANNUNZIATA"},"officeName":"","departmentName":"SYSTEMS (LOCAL)","teamName":"RNEST SOS","type":"Original","headerNumber":"0999"}],"message":"P","messageMail":"N","designeeId":"","reopenFlag":"N","networkCloseReason":"","reasonDescription":"COB","linkExists":"N"}} ';
        ADBReadIssueDetailsResponseWrapper.parse(val);
        test.stopTest();
    }
}