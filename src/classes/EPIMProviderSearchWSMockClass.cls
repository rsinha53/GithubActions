@isTest
global class EPIMProviderSearchWSMockClass implements HttpCalloutMock{
    global HTTPResponse respond(HTTPrequest req){
     
        // Create a fake response
        HttpResponse res = new HttpResponse();
        if(req.getEndpoint().endsWith('token')){
          //  System.assertEquals('https://login.salesforce.com/services/oauth2/token', req.getEndpoint());
          //  System.assertEquals('POST', req.getMethod());
            res.setHeader('Content-Type', 'application/x-www-form-urlencoded'); 
            res.setBody('{"access_token": "access token here",' +
                    '"instance_url": "https://ap4.salesforce.com","id": "https://login.salesforce.com/id/0046878SDSFER7892KDSDS/09823j8as4dffh73hjha23asdf",' +
                    '"token_type": "Bearer","issued_at": "9102837029332847","signature": "EAMz1IUncdkYWglusKsQkliasudevM7A+rLRpxUhsYcKaY="}');
            res.setStatusCode(200);            
        }
        else if(req.getEndpoint().endsWith('searchOrganization/search?pageNumber=1&pageSize=50') ){
        Map<String, Object> result1map = new Map<String, Object>();
            string myString = 'This is a string';
            object myObj = myString;
            result1map.put('access_token',myObj);
        res.setHeader('Content-Type', 'application/json');
        String json=       '{"resourceType":"Bundle","meta":{"profile":["http://hl7.org/fhir/Profile/Bundle"]},"type":"message","total":1,"entry":[{"resource":{"resourceType":"MessageHeader","eventCoding":{"code":"search-return","display":"search-return"},"source":{"endpoint":"/api/voyager/provider/organization/v1/search"},"focus":[{"reference":"Organization"}]},"search":{"mode":"match","score":1.0}},{"response":{"status":"OK","outcome":{"resourceType":"Bundle","id":"EPIM8cbcb5d6f5fa1dbO","meta":{"profile":["http://hl7.org/fhir/Profile/Bundle"]},"entry":[{"resource":{"resourceType":"Organization","identifier":[{"type":{"coding":[{"code":"NPI"}]},"value":"1114453453"},{"type":{"coding":[{"code":"PRN"}]},"value":"POZ22WSW9P"},{"type":{"coding":[{"code":"PRN"}]},"value":"7034477"},{"type":{"coding":[{"code":"CCN"}]},"value":"676456"},{"type":{"coding":[{"code":"CCN"}]},"value":"45F858"},{"type":{"coding":[{"code":"UHGLTK"}]},"value":"EPIM8cbcb5d6f5fa1dbO"}],"name":"APOLLO REHAB AT WOODLANDS, LLC","alias":[{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-08-12T16:57:49+00:00","sourceSystemCd":"UHC_NDB"}}],"use":"usual","purpose":"IRS-SUB","text":["THE MEDICAL RESORT AT THE WOODLANDS"]},{"use":"Usual","purpose":"Other Organization Name","text":["THE MEDICAL RESORT AT WOODLANDS"]},{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-08-12T16:57:49+00:00","sourceSystemCd":"CMS_POS"}}],"use":"usual","purpose":"OTH","text":["THE MEDICAL RESORT AT WOODLANDS"]},{"use":"Usual","purpose":"Other Organization Name","text":["THE MEDICAL RESORT AT THE WOODLANDS"]},{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-08-12T16:57:49+00:00","sourceSystemCd":"UHC_NDB"}}],"use":"usual","purpose":"ORG-NAME","text":["THE MEDICAL RESORT AT THE WOODLANDS"]},{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-08-12T16:57:49+00:00","sourceSystemCd":"NPPES"}}],"use":"official","purpose":"DBA","text":["THE MEDICAL RESORT AT WOODLANDS"]},{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-08-12T16:57:49+00:00","sourceSystemCd":"LNRS"}}],"use":"usual","purpose":"FAC","text":["THE MEDICAL RESORT AT WOODLANDS"]}],"telecom":[{"system":"phone","value":"3468310656","useType":[{"coding":[{"system":"UHG","code":"BILL","display":"Billing"}],"text":"Billing"}]}],"address":[{"line":["24854 Cathedral Lakes Pkwy"],"city":"Spring","state":"TX","postalCode":"773864624","useType":[{"coding":[{"system":"UHG","code":"BILL","display":"Billing"}],"text":"Billing"}],"cityAlias":[{"text":"Spring"}]},{"line":["6125 Luther Ln # 309"],"city":"Dallas","state":"TX","postalCode":"752256202","useType":[{"coding":[{"system":"UHG","code":"MAIL","display":"Mailing"}],"text":"Mailing"}],"cityAlias":[{"text":"Dallas"}]}]}},{"resource":{"resourceType":"Location","identifier":[{"type":{"coding":[{"code":"SYSFK"}]},"value":"0AF7C285F34EE74A25A891C0224FEBAC"}],"telecom":[{"system":"phone","value":"7076663490","useType":[{"coding":[{"system":"UHG","code":"PLSV","display":"Place of Service"}],"text":"Place of Service"}]},{"system":"phone","value":"9724428069","useType":[{"coding":[{"system":"UHG","code":"PLSV","display":"Place of Service"}],"text":"Place of Service"}]},{"system":"fax","value":"2818073004","useType":[{"coding":[{"code":"PLSV","display":"Place of Service"}],"text":"Place of Service"}]},{"system":"phone","value":"3468310656","useType":[{"coding":[{"system":"UHG","code":"PLSV","display":"Place of Service"}],"text":"Place of Service"}]}],"singleAddress":{"line":["24854 Cathedral Lakes Pkwy"],"city":"Spring","state":"TX","postalCode":"773864624","useType":[{"coding":[{"system":"UHG","code":"PLSV","display":"Place of Service"}],"text":"Place of Service"}],"cityAlias":[{"text":"Spring"}],"rank":1}}}]}}}]}';
        res.setBody(json);
        res.setStatusCode(200);
        res.setStatus('Success');
        }
        else if(req.getEndpoint().endsWith('practitioner/v2/search?pageNumber=1&pageSize=50') ){
        Map<String, Object> result1map = new Map<String, Object>();
            string myString = 'This is a string';
            object myObj = myString;
            result1map.put('access_token',myObj);
        res.setHeader('Content-Type', 'application/json');
        string json = '{"resourceType":"Bundle","meta":{"profile":["http://hl7.org/fhir/Profile/Bundle"]},"type":"message","total":1,"entry":[{"resource":{"resourceType":"MessageHeader","eventCoding":{"code":"search-return","display":"search-return"},"source":{"endpoint":"/api/voyager/provider/practitioner/v1/search"},"focus":[{"reference":"Organization"}]},"search":{"mode":"match","score":1.0}},{"response":{"status":"OK","outcome":{"resourceType":"Bundle","id":"EPIMc643057c2825de0P","meta":{"profile":["http://hl7.org/fhir/Profile/Bundle"]},"entry":[{"resource":{"resourceType":"Practitioner","identifier":[{"type":{"coding":[{"code":"NPI"}]},"value":"1801910658"},{"type":{"coding":[{"code":"DEA"}]},"value":"FF2084868","characteristic":[{"name":"State","value":"TX"}]},{"type":{"coding":[{"code":"SL"}]},"value":"P1303          ","characteristic":[{"name":"State","value":"TX"}]},{"type":{"coding":[{"code":"SL"}]},"value":"5315023513","period":{"active":false},"characteristic":[{"name":"State","value":"MI"},{"name":"Status","value":"I"}]},{"type":{"coding":[{"code":"SL"}]},"value":"5315047020","characteristic":[{"name":"State","value":"MI"}]},{"type":{"coding":[{"code":"SL"}]},"value":"30184877","characteristic":[{"name":"State","value":"TX"}]},{"type":{"coding":[{"code":"SL"}]},"value":"4301086580","characteristic":[{"name":"State","value":"MI"},{"name":"Status","value":"A"}]},{"type":{"coding":[{"code":"SL"}]},"value":"4351014626","period":{"active":false},"characteristic":[{"name":"State","value":"MI"},{"name":"Status","value":"I"}]},{"type":{"coding":[{"code":"SL"}]},"value":"P1303","characteristic":[{"name":"State","value":"TX"},{"name":"Status","value":"A"}]},{"type":{"coding":[{"code":"SL"}]},"value":"18432","period":{"active":false},"characteristic":[{"name":"State","value":"NV"},{"name":"Status","value":"I"}]},{"type":{"coding":[{"code":"MCD"}]},"value":"285948001","characteristic":[{"name":"State","value":"TX"}]},{"type":{"coding":[{"code":"SRC"}]},"value":"[DEA]FF2084868"},{"type":{"coding":[{"code":"SRC"}]},"value":"[UHC_NDB]3234379"},{"type":{"coding":[{"code":"SRC"}]},"value":"[LNRS]PIZ22245G8"},{"type":{"coding":[{"code":"SRC"}]},"value":"[NPPES]1801910658"},{"type":{"coding":[{"code":"PRN"}]},"value":"3234379"},{"type":{"coding":[{"code":"PRN"}]},"value":"PIZ22245G8"},{"type":{"coding":[{"code":"UHGLTK"}]},"value":"EPIMc643057c2825de0P"}],"name":[{"use":"official","family":"FRYBARGER","given":["JAMES"],"_given":[{"extension":[{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2021-11-10","validated":false,"valid":false,"cleansed":false}}]}]}],"gender":"male","qualification":[{"code":{"coding":[{"code":"R","display":"Resident"}],"text":"Resident"}},{"code":{"coding":[{"code":"MD","display":"Doctor Of Medicine"}]}}]}},{"resource":{"resourceType":"PractitionerRole","telecom":[{"system":"fax","value":"8326532978"},{"system":"phone","value":"8327776165"},{"system":"phone","value":"8322334544"},{"system":"phone","value":"2817841500"},{"system":"fax","value":"2817841522"},{"system":"fax","value":"2815760555"},{"system":"phone","value":"2815760555"}],"address":[{"type":"postal","line":["PO Box 20623"],"city":"Dallas","state":"TX","postalCode":"753200001"}]}},{"resource":{"resourceType":"PractitionerRole","specialty":[{"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/practitionerrole-primaryInd","valueBoolean":false},{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-09-12T22:30:31+00:00","validated":false,"valid":false,"cleansed":false,"sourceSystemCd":"NPPES, UHC_NDB, LNRS"}}],"coding":[{"system":"NUCC","code":"390200000X","display":"GROUP: Student, Health Care CLASS: Student in an Organized Health Care Education/Training Program SPECIALTY: "}]},{"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/practitionerrole-primaryInd","valueBoolean":true},{"url":"http://voyager.optum.com/extensions#metadata","valueMetadata":{"modifiedDateTime":"2022-09-12T22:30:31+00:00","validated":false,"valid":false,"cleansed":false,"sourceSystemCd":"NPPES, UHC_NDB, LNRS"}}],"coding":[{"system":"NUCC","code":"207P00000X","display":"GROUP: Allopathic & Osteopathic Physicians CLASS: Emergency Medicine SPECIALTY: "}]}]}}]}}}]}';
        res.setBody(json);
        res.setStatusCode(200);
        res.setStatus('Success');
        }
        return res;
    }
}