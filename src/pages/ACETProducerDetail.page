<apex:page controller="ACETProducerDetailController" sidebar="false" id="thePage" showheader="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0">
  <script type="text/javascript" src="{!$Label.ACETDynatraceJSURL}" data-dtconfig="{!$Label.ACETDynatrace_config}|reportUrl={!$Label.ACETDynatraceReportURL}|tp=500,50,0,1" crossorigin="anonymous"></script>  
      
        <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
        <head>
        <apex:includeScript value="{!$Resource.JQuery}" />
        <apex:includeScript value="{!$Resource.JqueryTableSorter}"/>
        <apex:includeScript value="/support/console/38.0/integration.js" />
        <apex:includeScript value="{!URLFOR($Resource.ACETResources, '/js/vendor/chosen.jquery.min.js')}" />
        <apex:stylesheet value="{!URLFOR($Resource.ACETResources, '/css/vendor/chosen.min.css')}" />
        <apex:includeScript value="{!URLFOR($Resource.ACETResources, '/js/main.js')}" />
        <apex:stylesheet value="{!URLFOR($Resource.jQueryDatatableResources,'jquery-ui.css')}" />
        <apex:includeScript value="{!URLFOR($Resource.jQueryDatatableResources,'jquery.dataTables.min.js')}" />
        <apex:stylesheet value="{!URLFOR($Resource.jQueryDatatableResources,'jquery.dataTables.min.css')}" />
        
        <apex:includeScript value="{!URLFOR($Resource.ACETUIResources, '/JS/bootstrap.min.js')}"/>
        <apex:includeScript value="{!$Resource.ACETUIIcons}" />    
       <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
        <style>
        
        html, body {
            margin: 0;
            height: 100%;
        }
                
        .header {
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.07);
          z-index: 1;
        }
        .stage-left {
          width: 4rem;
          transition: width 0.2s ease-in-out 0.05s;
        }
        @media (min-width: 1024px) {
          .stage-left.open {
            width: 15rem;
            transition: width 0.1s ease-in-out;
          }
          .stage-left.open .stage-left__text {
            opacity: 1;
            width: auto;
            transition-delay: 0.2s;
          }
        }
        .stage-left li + li {
          margin-top: 0.02rem;
        }
        .stage-left a:not(.button) {
          display: block;
          text-decoration: none;
          white-space: nowrap;
          border-radius: 0.25rem;
          background: transparent;
          padding: 0.25rem;
          transition: background 0.05s linear;
        }
        
        
        .stage-left .stage-left__text {
          opacity: 0;
          width: 0;
          transition: all 0.05s linear;
        }
        .stage-left .slds-icon {
          max-width: initial;
        }
        .stage-container {
          max-height: 100%;
          overflow: hidden;
        }
        .slds-grid--frame {
          min-width: 767px;
          overflow-y: auto;
        }
            
        li{
            margin: 10px 0;
        }
            
        #wrapper {
          background: #f7f9fb;
          overflow: hidden;
          transition: height 200ms;
        }
        
        .pbError {
            font-weight: bold;
            color: #c00 !important;
            text-align: center;
        }
        
        .errorMsg {
            color: #c00 !important;
            
        }
        
        .error
        {
            border-color: #c00 !important;
            box-shadow: 0px 0px 3px #c00;
        }
        .messageTable
        {
         border: none;
        }
       .errorM3 .msgIcon {
        padding: 0px 0px 0px 0px;
        margin-left: 0px;
        width: 0px;
        }   
        .confirmM3 .msgIcon {
            padding: 0px 0px 0px 0px;
            margin-left: 0px;
            width: 0px;
        }
        .infoM3 .msgIcon {
            padding: 0px 0px 0px 0px;
            margin-left: 0px;
            width: 0px;
        }
        .warningM3 .msgIcon {
            padding: 0px 0px 0px 0px;
            margin-left: 0px;
            width: 0px;
        }
        .slds-scope .slds-size--1-of-2, .slds-scope .slds-size_1-of-2
        {
            width: 15rem;
        }
        
        table.no-footer.dataTable
        {
            margin-left: 1px !important;
        }
        #datatable_wrapper
        {    
            max-width: 136%;
            overflow: auto;
        }
        #datatable
        {
            width: 99.9% !important;
        }
        
        .chosen-container
        {
             float:left;
             width:20pc  !important; 
             border: 1px solid #d8dde6;   
             margin-right: 2pc;
        }
        
        .slds-scope .slds-box
        {
            padding: 0.5rem;
        }
                
        .labelFormat
        {
            font-weight:bold;
            width: 30%;
            text-align: right;
        }
        
        .titleBold
        {
            font-weight:bold !important;
        }
        .slds-scope .slds-table
        {
            color: #54698d;
        }
        .slds-scope .slds-table th
        {
            font-weight: bold;
        }    
        .collapse
        {
           display:none;
        }
        .collapse.in
        {
            display:block;
        } 
        
        .collapsing
        {
            position:relative;
            height:0;
            overflow:hidden;
                -webkit-transition-timing-function:ease;
                                                   -o-transition-timing-function:ease;
                                                   transition-timing-function:ease;
                -webkit-transition-duration:.35s;
                                                    -o-transition-duration:.35s;
                                                    transition-duration:.35s;
                -webkit-transition-property:height,visibility;
                                                    -o-transition-property:height,visibility;
                                                    transition-property:height,visibility;
         }
         
        a.changeText.collapsed:before
        {
            content:'Show More' ;
            display:block;
            min-width: 80px;
            white-space: nowrap;
        }
        
        a.changeText:before
        {
            content:'Show Less' ;
            display:block;
            min-width: 80px;
            white-space: nowrap;
        }
         
        .required .requiredInput
        {
            position: relative;
             height: auto;
        }
    
        .required .requiredInput .requiredBlock
        {
            height:100%;
            background-color:#c00;
            position:absolute;
            left:-4px;
            width:3px;
            top:1px;
            bottom:1px;
        }
        
        .chosen-container-multi .chosen-choices
        {
            overflow:hidden !important;
            border: 1px solid #fff;
        }
        
        .chosen-container-active .chosen-choices
        {
            border: 1px solid #fff;
        }
        
        
    
        </style>
        
        <style>
        .widthOriginator{
            width: 10%;
        }    
        .highlights-panel-container {
            width: 100%;
            background: #FFF;
            overflow: hidden;
            display:block;
            height:92vh !important;
            width:15rem !important;
            min-width: 15rem !important;
        }
        .highlights-panel-collapsible {
            min-height: 100px;
        }
        .panel-arrow-down {
            position: absolute;
            top: 45% !important;
            left: 0% !important;
            z-index: 100;
        }
        .panel-arrow-up {
            position: absolute;
            top: 45% !important;
            left: 15rem !important;
            z-index: 100;
        }   
        
        .hide-arrow {
            display: none;
        }
        
        .show-arrow {
            display: block;
        }
        
        .outputLabelPanel {
            font-weight: bold;
            margin-right: 20px;
        }
        
        .colStyle {
            width: 33%;
        }
        
        .custPopup {
            background-color: white;
            border-width: 2px;
            border-style: solid;
            z-index: 9999;
            left: 30%;
            padding: 10px;
            position: absolute;
            margin-left: -150px;
            top: 100px;
        }
        
        .custPopupHist {
            background-color: white;
            border-width: 2px;
            border-style: solid;
            z-index: 9999;
            left: 30%;
            padding: 10px;
            position: absolute;
            margin-left: -150px;
            margin-top: 300px;
            top: 100px;
        }
        
        .popupBackground {
            background-color: black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 1000%;
            top: 0;
            left: 0;
            z-index: 9998;
        }
        
        .autodoc {
            vertical-align: middle;
        }
        
        .imgclass:hover {
            background-image: url('/img/help/helpOrbs.gif');
            background-repeat: no-repeat;
            width: 16px;
            height: 15px;
            background-position: right;
        }
        
        .imgclass {
            background-image: url('/img/help/helpOrbs.gif');
            background-repeat: no-repeat;
            width: 16px;
            height: 15px;
        }
        .message {
            background-color: #ffc;
          }
          
        </style>
    
    <style>
        .PageHeader {
            font-size: x-large;
        }
        .caseHistory tbody {
            position: absolute;
            top: 240px;
        }
        
        table.dataTable thead th, table.dataTable tfoot th
        {
            color: #54698d;
        }
        
        [id*='originator_panel'] .detailList tbody th[scope='row']{width:15%;}
        [id*='originator_panel'] .pbBottomButtons .pbTitle{display:none;}
        [id*='originator_panel'] .pbBottomButtons .pbButtonb{text-align:center;}
    </style>
    </head>
    
        <script type="text/javascript">
     
        var MemberSearchTabId = '';
        var MemberSearchSubTabId = '';
        var vccdParams = '{!$CurrentPage.parameters.vccdParams}';
        $(document).ready(function(){
        
            var $originatorName = $("[id$='originatorName']"); 
            var PNFFlag = '{!JSENCODE(prodNotFound)}';
            console.log('PNF@@' +PNFFlag);  
            if(PNFFlag != '1')    
                $originatorName.val('{!JSENCODE(firstName)}' + ' ' + '{!JSENCODE(lastName)}');
            else
                $originatorName.val('{!JSENCODE(producerNamePNF)}');
                    
            $("[id$='ProducerDemographicsTable']").tablesorter({                         
            });
            $("tr").removeClass('last');
            $("[id$='contactTypeOtherId']").hide();
            $("#callTopicType").chosen();   
            $("[id$='CaseHistoryTable']").tablesorter({ });
            var CaseHistoryTable = $('[cid$="CaseHistoryTable"]').parent('table').eq(0).DataTable({
                //enables results highlight
                searchHighlight: true,
                "pagingType": "full_numbers",
                //sets record lengths to show in picklist
                aLengthMenu: [
                    [10, 25, 50, 100, 200, -1],
                    [10, 25, 50, 100, 200, "All"]
                ],
                "iDisplayLength": 50,
                 order: [[4, 'desc']],
               });
            init();
            vccdParams = '{!$CurrentPage.parameters.vccdParams}';
            if(vccdParams != ''){
                vccdParams = JSON.parse(vccdParams);
                if(vccdParams.callTopic != '')
                    $("#callTopicType").val(vccdParams.callTopic).trigger("chosen:updated");
            }
            getNumberOfProducerAlert();
            //topic is passed from case fast track
            var topic = '{!JSENCODE($CurrentPage.parameters.topic)}';
            if(topic){
                $("#callTopicType").val(topic).trigger("chosen:updated");   
            }
            var producerNFFlag = '{!JSENCODE(prodNotFound)}';
            console.log('producerNFFlag @@' + producerNFFlag);
            if(producerNFFlag != '1')
                callWCOnPgaeLoad();
             
        });
        
        function init(){
        
            $("[id$='interactionId']").on('click', function(){
                alert('clicked');       
                sforce.console.getFocusedPrimaryTabId(function(result) {
                    sforce.console.openSubtab(result.id, '/'+'{!JSENCODE(Interaction.Id)}', true, '{!JSENCODE(Interaction.Name)}', null);
                });
                return false;
            });
        }
        function topFunction() {
            $("div.stage-main").scrollTop(0);
        }
        
        function checkContactName() {
             var $contactName = $("[id$='contactNameId']");
             var $groupproducerinfo = $("[id$='groupproducerinfo']");
             var $ContactType = $("[id$='contactTypeId']");
             var errorMsg = "You must enter a value."; 
             var errorMsg2 = "Enter a contact name."; 
             var isError = false;
             $contactName.removeClass("error").parent().find(".errorMsg").remove();
             $groupproducerinfo.removeClass("error").parent().find(".errorMsg").remove();
             $ContactType.removeClass("error").parent().find(".errorMsg").remove();
             if(!$contactName.val()){            
                $("[id$='contactNameId']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>');
                $("[id$='groupproducerinfo']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg2 + '</div>');
                isError = true;
            }
            if($ContactType.val() =='----None----')
            {
                var errorMsg = "You must select a value."; 
                $ContactType.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>');
                isError = true; 
            }
            if(isError == true){
            	return false;
            }
            else {
                return true;
            }
             
        
        }
       
            function checkContactNameGroupHistory() {
             var $contactName = $("[id$='contactNameId']");
             var $groupHistoryPopup = $("[id$='groupHistoryPopup']");
             var errorMsg = "You must enter a value."; 
             var errorMsg2 = "Click close button and enter a contact name."; 
             $contactName.removeClass("error").parent().find(".errorMsg").remove();
             $groupHistoryPopup.removeClass("error").parent().find(".errorMsg").remove();
             if(!$contactName.val()){            
                $("[id$='contactNameId']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>');
                $("[id$='groupHistoryPopup']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg2 + '</div>');
                return false;           
            }
            else {
                return true;
            }
             
        
        }
        
        var isActive = true;
        var activeChecker = 0;
        function checkIsActive(){
            if(activeChecker == 0){
                isActive = true;
            } else if(activeChecker > 0){
                isActive = false;
            }
            activeChecker = activeChecker + 1;
        }
        
        
        function openTopicDetail(){                     
            activeChecker = 0;            
            var callTopics = $("#callTopicType").chosen().val();
            var callTopicsList = '';
            $("#callTopicType_chosen").find(":nth-child(1)").find("li.search-choice").each(function(){
                if(callTopicsList == '' || callTopicsList == null){
                    callTopicsList = $(this).find("span").html();
                } else {
                    callTopicsList = callTopicsList + ',' + $(this).find("span").html();
                }
            });
            callTopicsList = callTopicsList.split(',');
            
            var $originatorName = $("[id$='originatorName']");
            var $contactType = $("[id$='contactTypeId']");
            var $contactName = $("[id$='contactNameId']");
            var $contactTypeOther = $("[id$='contactTypeOtherId']");        
            hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
            var fastTrack = '{!JSENCODE($CurrentPage.parameters.fastTrack)}';
            if(callTopicsList == null || callTopicsList == '' || callTopicsList == undefined)
                callTopicsList = false;
            console.log('opentopic metthod...' + callTopicsList);
            var urlParam = 'interactionId={!Interaction.Id}' +'&' + 'contactId={!Subject.Id}&additionalInfo='+hightlightPanelInfo + '&fastTrack=' + fastTrack;
            
            $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();        
            $contactName.removeClass("error").parent().find(".errorMsg").remove();        
            $originatorName.removeClass("error").parent().find(".errorMsg").remove();  
            $contactType.removeClass("error").parent().find(".errorMsg").remove();
            $contactTypeOther.removeClass("error").parent().find(".errorMsg").remove();        
            
            //Code to display validation based on different combination of fields
            var errorMsg = "You must enter a value.";
            var errorMsg2 = "You must select an Originator."; 
            var errorMsg3 = "You must select a value.";
            var isError = false;
            if(!$originatorName.val()){
            	$("[id$='originatorName']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg2 + '</div>'); 
            	isError = true;
            }
            if(!callTopicsList){
            	$("#callTopicType").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>');
            	isError = true;
            }
            if(!$contactName.val()){
            	$("[id$='contactNameId']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>');
            	isError = true;
            }
            if($contactType.val() == '----None----' ){
            	$("[id$='contactTypeId']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg3 + '</div>');
            	isError = true;
            }
            if(isError == true){
            	return false;
            }
            
            
            if(callTopicsList){
                updateInteraction();
                for(var i = 0; i < callTopicsList.length; i++){
                    var callTopic = callTopicsList[i];
                    if(callTopic == 'Licensing and Credentialing'){
                            sforce.console.getFocusedPrimaryTabId(function(result){                          
                            var url = '/apex/ACETLicensingAndCredentialing?callTopic=Licensing and Credentialing'+ '&' + urlParam;
                            console.log("url before oping topic :::: "+url);
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Licensing and Credentialing', null);
                        });
                    }
                    else if( callTopic == 'Commissions'){
                        sforce.console.getFocusedPrimaryTabId(function(result){
                            var url = '/apex/ACETViewCommissions?callTopic=Commissions' +'&' + urlParam;
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Commissions', null);
                        });
                    }
                    else if( callTopic == 'Producer Other Inquiry'){
                        sforce.console.getFocusedPrimaryTabId(function(result){
                            var url = '/apex/ACETEmployerBrokerOtherInquiry?callTopic=Producer Other Inquiry' +'&' + urlParam;
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Producer Other Inquiry', null);
                        });
                    }
                    else if( callTopic == 'Communications'){
                        sforce.console.getFocusedPrimaryTabId(function(result){
                            var url = '/apex/ACETCommunicationSearchPage?' + urlParam + '&producerId={!JSENCODE(producerId)}';
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Communications', null);
                        });
                    }
                    else if( callTopic == 'Materials Request'){
                        sforce.console.getFocusedPrimaryTabId(function(result){
                            var url = '/apex/ACETFormsHistory?' + urlParam + '&producerId={!JSENCODE(producerId)}';
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Materials Request', null);
                        });
                    }
                }
                
                //clear selection
                $("#callTopicType").val('').trigger('chosen:updated');
                
                return false;
            }
            
        }
    
        
        
        function updateContactType()
        {
            updateContact();
        }
        
        
        var ProducerDetailPrimaryTabId = '';
        var GroupSearchSubTabId = '';
        
        var OpenGroupSearchSubTabSuccess = function OpenGroupSearchSubTabSuccess(result) {
            GroupSearchSubTabId = result.id;
        }
        
        var OpenProducerSearchSubTab = function OpenProducerSearchSubTab(result) {
            //Now that we have the primary tab ID, we can open a new subtab in it
            ProducerDetailPrimaryTabId = result.id;
            if(GroupSearchSubTabId == '') {
              sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETSearchEmployerGroup?' +'InteractionId={!interaction.Id}&additionalInfo='+hightlightPanelInfo+'&isFromProducer=true'  , true, 'Group Search', null, OpenGroupSearchSubTabSuccess, 'ProducerGroupSearch');
            }
            else {
                sforce.console.focusSubtabById(GroupSearchSubTabId, FocusGroupSearchSubTabSuccess);
            }    
        };
        
        var FocusGroupSearchSubTabSuccess = function FocusGroupSearchSubTabSuccess(result) {
            if (!result.success) {
                 sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETSearchEmployerGroup?' +'InteractionId={!interaction.Id}&additionalInfo='+hightlightPanelInfo+'&isFromProducer=true' , true, 'Group Search', null, OpenGroupSearchSubTabSuccess, 'ProducerGroupSearch');
            }
        }
        
        function OpenCaseHistorySubTab(RecordId, RecordName) {   
            sforce.console.getEnclosingPrimaryTabId(function(result) {
            sforce.console.openSubtab(result.id, '/' + RecordId, true, RecordName, null, OpenCaseHistorySubTabSuccess, RecordName);    
            
            return false;
        });
        }
        var OpenCaseHistorySubTabSuccess = function OpenCaseHistorySubTabSuccess(result) 
        {
            //
        }
            function OpenCaseHistorySubTabLink(RecordId, RecordName,intId, intName) {   
        sforce.console.getEnclosingPrimaryTabId(function(result) {
        sforce.console.openSubtab(result.id, '/' + RecordId+'?intId='+intId+'&intName='+intName, true, RecordName, null, OpenCaseHistorySubTabSuccess, RecordName);    
        
        return false;
    });
    }
        
           
              // Added by Harish for the US705141
               
                function groupDetailClick(groupid,groupname,interactionid)
                {
                  hightlightPanelInfoGroup = $("[id$='highlightPanelInfo']").val();
                  var tabName = 'Detail - '+groupname;
                  //alert('addtional info'+hightlightPanelInfo);
                  var url = '/apex/ACETViewEmployerGroup?groupName=' + groupname + '&Id=' + groupid + '&sourceOriginator=' + $("[id$='originatorName']").val() + '&InteractionId=' + interactionid +'&additionalInfo='+hightlightPanelInfoGroup; 
                  sforce.console.getFocusedPrimaryTabId(function(result) {
                               sforce.console.openSubtab(result.id, url, true, tabName,null,pushSubjectToArray);
                           });
                }
                 var subjectTabArray = new Array();
                 var pushSubjectToArray = function pushSubjectToArray(result) 
                 {
                    if (result.success == true) {
                        subjectTabArray.push(result.id);
                        subjectTabArrayStr = JSON.stringify(subjectTabArray);
                        localStorage.setItem('subjectTabArray', subjectTabArrayStr);
                    }
                  };
                // End for the US705141
            
            function closewindow()
            {
                $("[id$='groupHistory']").hide();
                resetwindow();
                return false;
            }
            
            var hightlightPanelInfo;
            function GroupSearchClick(){
                var $originatorName = $("[id$='originatorName']");
                var $ContactName = $("[id$='contactNameId']");
                var $ContactType = $("[id$='contactTypeId']");
                var returnflag = true;
                
                $("[id$='originatorName']").removeClass("error").parent().find(".errorMsg").remove();
                $ContactName.removeClass("error").parent().find(".errorMsg").remove();
                $ContactType.removeClass("error").parent().find(".errorMsg").remove();
                $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();
                
                if(!$originatorName.val())
                {
                    var errorMsg = "You must select an Originator."; 
                    $originatorName.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
                    returnflag = false; 
                }
                if($ContactType.val() =='----None----')
                {
                    var errorMsg = "You must select a value."; 
                    $ContactType.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
                    returnflag = false; 
                }
                if($.trim($ContactName.val()) == ''){
                   var errorMsg = "You must enter a value."; 
                   $ContactName.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
                   returnflag = false;                  
                }else if(returnflag)
                {    
                    hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
                    sforce.console.getEnclosingPrimaryTabId(OpenProducerSearchSubTab);
                }
                
                return false;
            }
            function memberSearchClick(hlpInfo)
       {
            var orinatorName = $("[id$='originatorName']").val();
            var $ContactName = $("[id$='contactNameId']");
            var $ContactType = $("[id$='contactTypeId']");
            
            $("[id$='originatorName']").removeClass("error").parent().find(".errorMsg").remove();
            $ContactName.removeClass("error").parent().find(".errorMsg").remove();
            $ContactType.removeClass("error").parent().find(".errorMsg").remove();
            $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();
            var isError = false;
            if(orinatorName == '----None----')
            {
                var errorMsg = "You must select an Originator."; 
                $("[id$='originatorName']").addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
                isError = true;
            }
            if($ContactType.val() =='----None----' && orinatorName != 'currentTp')
            {
                var errorMsg = "You must select a value."; 
                $ContactType.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
                isError = true;
            }
            if($ContactName.val() ==''){
               var errorMsg = "You must enter a value."; 
               $ContactName.addClass("error").parent().append('<div class="errorMsg"><strong>Error:</strong> ' + errorMsg + '</div>'); 
               isError = true; 
            }
            if(isError == false)
            {   
               // createUpdateContact(obj.value);  
                hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
                sforce.console.getEnclosingPrimaryTabId(OpenMemberSearchSubTab);
            } else {
            	return false;
            }
        }
        
        var OpenMemberSearchSubTab = function OpenMemberSearchSubTab(result) {
            //Now that we have the primary tab ID, we can open a new subtab in it
            ProducerDetailPrimaryTabId = result.id;
             if (MemberSearchSubTabId == '') {
                //Removed enrollag, rehirepolicy and group size parameters from URL for US585208 -- by divya -- 04/05/17  
                if(vccdParams != null && vccdParams != '') {
                    sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETMemberSearch?' +'InteractionId={!interaction.Id}&vccdParams=' + JSON.stringify(vccdParams)+'&additionalInfo='+hightlightPanelInfo +'&isFromProducer=true', true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProducerMemberSearch');
                   }
                else {
                    sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETMemberSearch?' +'InteractionId={!interaction.Id}&additionalInfo='+hightlightPanelInfo+'&isFromProducer=true', true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProducerMemberSearch');
                   }
            }
            else {
                sforce.console.focusSubtabById(MemberSearchSubTabId, FocusMemberSearchSubTabSuccess);
            }   
        };
        
        var OpenMemberSearchSubTabSuccess = function OpenMemberSearchSubTab(result) {
            MemberSearchSubTabId = result.id;
        }
        
        var FocusMemberSearchSubTabSuccess = function FocusMemberSearchSubTabSuccess(result) {
            if (!result.success) {
                //Removed enrollag, rehirepolicy and group size parameters from URL for US585208 -- by divya -- 04/05/17
                if(vccdParams != null && vccdParams != '')
                    sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETMemberSearch?' +'InteractionId={!interaction.Id}&vccdParams=' + JSON.stringify(vccdParams)+'&additionalInfo='+hightlightPanelInfo +'&isFromProducer=true', true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProducerMemberSearch');
                else
                    sforce.console.openSubtab(ProducerDetailPrimaryTabId , '/apex/ACETMemberSearch?' +'InteractionId={!interaction.Id}&additionalInfo='+hightlightPanelInfo +'&isFromProducer=true', true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProducerMemberSearch');
            }
        }   
                    
                    function removeErrorContactType(){
            console.log('Inside bottleneck');
            $("[id$='contactNameId']").removeClass("error").parent().find(".errorMsg").remove();
            $("[id$='contactTypeId']").removeClass("error").parent().find(".errorMsg").remove();
            $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();
            
        } 
        var scrollHighlightsPanel = function(){
            $(".highlights-panel-container").toggle("slide");
            $("[id$='btnMisdirectCaseLds']").parent().parent().parent().parent().parent().parent().parent().parent().parent().toggle("slide");
            if($(".panel-arrow-down").hasClass("show-arrow")){
                 $(".panel-arrow-down").addClass("hide-arrow").removeClass("show-arrow");
                 $(".panel-arrow-up").addClass("show-arrow").removeClass("hide-arrow");
             }
             else{
                 $(".panel-arrow-down").removeClass("hide-arrow").addClass("show-arrow");
                 $(".panel-arrow-up").removeClass("show-arrow").addClass("hide-arrow");
             }
        };    
       </script>
        <apex:form id="producerForm">
        
        <div class="slds-scope">
            <apex:slds />
            <apex:actionFunction name="getNumberOfProducerAlert" action="{!getNumberOfProducerAlert}" reRender="hlPanel" status="refreshMemberStatus"/> 
            <apex:actionfunction name="callWCOnPgaeLoad" action="{!CallGetProducerWS1}" rerender="hlPanel,generalInformation,producerdemographics,producergroupdetails,messagePanel" status="refreshMemberStatus"/>
            <apex:actionFunction action="{!updateInteraction}" name="updateInteraction" reRender="false"/>
            <apex:actionFunction action="{!updateContact}" onComplete="removeErrorContactType()"  name="updateContact" reRender="hlPanel" status="refreshMemberStatus"/>    
             <apex:actionFunction action="{!resetWindow}" name="resetwindow" reRender="groupHistory" status="refreshMemberStatus"/>
            <apex:actionStatus id="refreshMemberStatus">
                <apex:facet name="start">
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.25; z-index: 1000; background-color: black;">
                    &nbsp;
                </div>
                <div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; z-index: 1001; margin: 15% 50%">
                    <div style="display: inline-block; padding: 2px; background-color: #fff; width: 125px;">
                        <img src="/img/loading.gif" style="float: left; margin: 8px;" />
                        <span style="display: inline-block; padding: 10px 0px;">Loading...</span>
                    </div>
                </div>
                </apex:facet>
            </apex:actionStatus>
            
            <!-- Changes start by Abhinav Balla  -->
            <div class="slds-grid slds-grid--frame slds-grid--vertical">
            <!-- Stage Container -->
            <div class="stage-container slds-grid slds-nowrap slds-size--1-of-1">
            
            <!-- Stage Left - Navigation -->
                <div class="highlights-panel-collapsible">
                    <div class="highlights-panel-container ">
		            <nav class="stage-left slds-size--1-of-2 slds-shrink-none slds-scrollable--y slds-page-header slds-p-around--small open" 
		                 style="display:block;height:92vh;overflow:scroll;">
		               <ul role="navigation" class="slds-has-block-links" >
		                   <li>
		                        <apex:outputPanel id="hlPanel" >
		                          <!-- <apex:inputHidden id="highlightPanelInfo" value="{!hpAdditionInfoStr}" /> -->
		                            <input type="hidden" value="{!hpAdditionInfoStr}" id="highlightPanelInfo"/>
		                
		                        <c:ACETInteractionHighlightsPanel_LDS id="popupPanel" InteractionAtt="{!Interaction}" showALertAtt="{!isShowALert}"  
		                                    SubjectAtt="{!Subject}" AdditionalInfoAtt="{!AdditionalInfo}" TotalProducerAlerts="{!lstProducerAlert}"></c:ACETInteractionHighlightsPanel_LDS> 
		                                    
		                        </apex:outputPanel>
		                        
		                        <apex:outputPanel id="casedetailpopupPanel">
		                            <c:ACETCaseDetail />
		                       </apex:outputPanel> 
		                   </li>
		               </ul>
		           </nav>
                   </div>
                   </div>
            
           <section class="stage slds-grid slds-grid--vertical slds-nowrap " style="overflow:hidden; min-height:74vh ; max-height:100vh">
              
                  <div class="slds-box slds-theme--inverse" >
                    <apex:outputPanel layout="none" id="producerDetailHeader" >
                        <div class="">
                        <apex:image value="{!URLFOR($Resource.ACETUIIcons,'Producer.bmp')}" width="20" height="20"/>
                        
                        Producer Detail</div>
                    </apex:outputPanel>
                    <!--<span class="slds-icon_container slds-icon-standard-client" > 
              <svg aria-hidden="true" class="slds-icon"> 
                <use xmlns:xlink="http://www.w3.org/1999/xlink " xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#client" />
                </svg> 
              <span class="slds-assistive-text">client Icon</span> 
            </span>-->
                    
                  </div>
                  
                  <div id="errorMsgDiv" style="margin-left: 31%"></div>
              <!-- Stage Main -->
                  <div class="stage-main slds-panel slds-grid slds-wrap slds-grow slds-scrollable--y slds-form--compound" style="display:block;width:100%;height:100vh !important;background-color: white;overflow:scroll; " role="main">
                      
                      <br/><br/><br/><br/>
                      <apex:outputPanel id="dummyPanel"></apex:outputPanel>
                    <div class="panel-arrow-down hide-arrow" onclick="scrollHighlightsPanel();" auto-doc-item="false">
                        <img class="arrow-down" src="{!URLFOR($Resource.highlightspanelarrows, '/hparrowright.png')}" border="0" />
                    </div>
                    <div class="panel-arrow-up show-arrow" onclick="scrollHighlightsPanel();" auto-doc-item="false">
                        <img class="arrow-up" src="{!URLFOR($Resource.highlightspanelarrows, '/hparrowleft.png')}" border="0" />
                    </div>
                      
                     <!--<apex:pageBlock id="originator_panel">-->
                     <apex:outputPanel styleClass="required">
        
                          <div class="form-element__group" style="margin: -2% 3%">
                             <div class="slds-form-element__row ">  
                                 <div class="slds-form-element" >  
                                    <apex:outputLabel styleClass="slds-form-element__label" value="Originator Name"></apex:outputLabel>
                                    <apex:outputPanel styleClass="required">
                                        <apex:outputPanel styleClass="requiredInput" layout="block" >
                                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                            <apex:inputText id="originatorName" value="{!originatorName}" styleClass="slds-input slds-form-element__control" disabled="true" />
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                     
                                  </div>
                                  <div class="slds-form-element" >  
                                 <label class="slds-form-element__label">Contact Type</label>
                                     <apex:outputPanel >
                                         <apex:outputPanel styleClass="requiredInput" layout="block" >
                                            <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                            <apex:selectList id="contactTypeId" size="1" value="{!contactType}" styleClass="slds-form-element__control slds-select slds-select_container" onchange="updateContactType();" style="height:0pc">
                                                <apex:selectOptions value="{!contactTypeOptions}"></apex:selectOptions>
                                            </apex:selectList>   
                                         </apex:outputPanel>
                                     </apex:outputPanel>
                                  </div>
    
                                  <div class="slds-form-element" >  
                                    <apex:outputLabel styleClass="slds-form-element__label" value="Contact Name"></apex:outputLabel>
                                    <apex:outputPanel >
                                        <apex:outputPanel styleClass="requiredInput" layout="block" >
                                        <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                            <apex:inputText id="contactNameId" value="{!contactName}" styleClass="slds-input slds-form-element__control" onchange="updateContactType()" disabled="{!displayCName}"/> 
                                         
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                     
                                  </div>
                                  <div class="slds-form-element" >
                                        <apex:outputLabel styleClass="slds-form-element__label" value="Topic"></apex:outputLabel>
                                            <apex:outputPanel layout="none" id="calltopicdropdown" styleClass="slds-form-element__control" >                                                        
                                                 <apex:outputPanel styleClass="requiredInput" layout="block" >
                                                    <!--<apex:outputPanel styleClass="requiredBlock" layout="block"/>-->
                                                    <select id="callTopicType" multiple="true" data-placeholder="Select Topic" onchange="removeErrorContactType()">
                                                        <apex:repeat value="{!CallTopicOptions}" var="opt">                                                    
                                                            <option value="{!opt.Value}"><span class = "select-multi">{!opt.Label}</span></option>                                                                                              
                                                        </apex:repeat>                                                                                                                          
                                                     </select>                                                    
                                                </apex:outputPanel>
                                         </apex:outputPanel>  
                                   </div>
                              </div> 
                                <br/>
                          <c:ACETThirdPartyContacts SubjectIdAttr="{!Subject.Id}"  additionalInfoAtr="{!AdditionalInfo}" additionalInfoStrAtr="{!hpAdditionInfoStr}" InteractionAttr="{!Interaction}"></c:ACETThirdPartyContacts>  
        
                          <div class="slds-form-element__row" style="text-align: center;margin-bottom: 2pc;">  
                             <div class="slds-form-element" > 
                                  <apex:commandButton id="OpenCallTOpic" value="Open Topic" onclick="openTopicDetail();" styleClass="btn slds-button slds-button--brand slds-not-selected" reRender="dummyPanel" />
                             </div>
                             
                          </div>
                          </div>
                     </apex:outputPanel>                 
                     <br/>
            <apex:outputPanel id="messagePanel" layout="none">
                  <apex:pageMessages />
              </apex:outputPanel>  
                     <hr style="margin:0 0"></hr>
                     
                  <!--General Information Section Starts-->    
                   <apex:outputPanel id="generalInformation">
                        <div class="slds-panel__section" style="padding: 0 2pc 1pc">                 
                        <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">General Information</div>  
                             <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#genInfo" style="float:right" > </a>
                             <div class="form-element__group collapse in" id="genInfo">
                                <apex:outputPanel id="generalInfoId" rendered="{!prodNotFound != '1'}">
                                    <div class="slds-form-element__row">  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="First Name"></apex:outputLabel>  
                                           <apex:outputText value="{!producerDetailresult.firstName}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                         </div>  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="Producer ID"></apex:outputLabel>  
                                           <apex:outputText value="{!producerDetailresult.producerId}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div> 
                                   </div>
                                   <div class="slds-form-element__row">  
                                       
                                     <div class="slds-form-element " >  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Middle Intital"></apex:outputLabel>  
                                       <apex:outputText value="{!producerDetailresult.MiddleInitial}" styleClass="slds-form-element__label slds-text-body--small"/> 
                                     </div>
                                     <div class="slds-form-element " >  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Tax ID"></apex:outputLabel>  
                                       <apex:outputText value="{!producerDetailresult.tax_id}" styleClass="slds-form-element__label slds-text-body--small"/> 
                                     </div>  
                                   </div>   
                                   <div class="slds-form-element__row" >  
                                     <div class="slds-form-element " >  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Last Name"></apex:outputLabel>  
                                       <apex:outputText value="{!producerDetailresult.lastName}" styleClass="slds-form-element__label slds-text-body--small"/> 
                                     </div>
                                     <div class="slds-form-element ">  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="SSN"></apex:outputLabel>  
                                       <apex:outputPanel styleClass="slds-form-element__label slds-text-body--small">
                                            <apex:repeat value="{!producerDetailresult}" var="prd">
                                                <c:ACETMaskSSNComponent SSNValue="{!prd.tax_SSN}" EID="{!prd.producerId}" Type="Producer Detail" Showcopy="True"></c:ACETMaskSSNComponent>
                                            </apex:repeat>
                                       </apex:outputPanel>
                                       
                                       <!--<apex:outputText value="MemberDetail.TerminationDate" styleClass="slds-form-element__label slds-text-body--small"/> -->
                                     </div>  
                                     
                                   </div>
                                   <div class="slds-form-element__row">  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Agency Name"></apex:outputLabel>  
                                           <apex:outputText value="{!producerDetailresult.CompanyName}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                         </div>  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="Primary Contact Name"></apex:outputLabel>  
                                           <apex:outputText value="{!producerDetailresult.primaryContactName}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div> 
                                   </div>
                                   <div class="slds-form-element__row">  
                                       
                                     <div class="slds-form-element " >  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Legacy Broker Code"></apex:outputLabel>  
                                       <apex:outputText value="{!producerDetailresult.legacyBrokerCode}" styleClass="slds-form-element__label slds-text-body--small"/> 
                                     </div>
                                     <div class="slds-form-element " >  
                                       <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Type"></apex:outputLabel>  
                                       <apex:outputText value="{!producerDetailresult.type}" styleClass="slds-form-element__label slds-text-body--small"/> 
                                     </div>  
                                   </div>   
                                   <div class="slds-form-element__row" style="margin-bottom: 2pc;margin-right:10pc;">  
                                     <div class="slds-form-element" style="width:50%; text-align: right; padding-right:1%"> 
                                         <apex:commandLink value="Go To Group Search" style="color:Blue;" id="gotogroupsearch" onclick="return GroupSearchClick();"/>
                                     </div>
                                     <div class="slds-form-element" style="width:50%; text-align:left; padding-left:1%">
                                         <apex:commandLink id="openMemSearch" value="Go To Member Search" style="color:Blue;" onclick="return memberSearchClick('{!hpAdditionInfoStr}');"/>
                                     </div>
                                 
                              </div> 
                              </apex:outputPanel>
                              <!-- Added by Avish on 12042017 as a part of US813401 -->
                              <apex:outputPanel rendered="{!prodNotFound == '1'}">
                                    <div class="slds-form-element__row">  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Producer ID"></apex:outputLabel>  
                                           <apex:outputText value="{!producerIdPNF}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                         </div>  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="Producer Name"></apex:outputLabel>  
                                           <apex:outputText value="{!producerNamePNF}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div> 
                                    </div>  
                                    <div class="slds-form-element__row">  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="Contact Name"></apex:outputLabel>  
                                           <apex:outputText value="{!contactNamePNF}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div>                                 
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="Phone Number"></apex:outputLabel>  
                                           <apex:outputText value="{!phoneNumberPNF}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div> 
                                    </div>  
                                    <div class="slds-form-element__row">  
                                         <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value=""></apex:outputLabel>  
                                           <apex:outputText value="" styleClass="slds-form-element__label slds-text-body--small"/>  
                                         </div>                                      
                                    </div>                                  
                                                                         
                                     <div class="slds-form-element__row" style="margin-bottom: 2pc;margin-right:10pc;">  
                                         <div class="slds-form-element" style="width:50%; text-align: right; padding-right:1%"> 
                                             <apex:commandLink value="Go To Group Search" style="color:Blue;" id="gotogroupsearchPNF" onclick="return GroupSearchClick();"/>
                                         </div>
                                         <div class="slds-form-element" style="width:50%; text-align:left; padding-left:1%">
                                             <apex:commandLink id="openMemSearchPNF" value="Go To Member Search" style="color:Blue;" onclick="return memberSearchClick('{!hpAdditionInfoStr}');"/>
                                         </div>
                                     </div>                                                            
                              </apex:outputPanel>    
                              <!-- End of US813401 -->                      
                             </div>
                         </div>  
                    </apex:outputPanel>
               <!--General Information Section Ends-->    
                  
               <hr style="margin:0 0"></hr>
               
               <!--Address Section Starts-->
                    <apex:outputPanel id="producerdemographics" rendered="{!prodNotFound != '1'}">
                        <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                            <legend class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Address</legend>
                            <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#addressInfo" style="float:right"></a>
                            <div class="form-element__group collapse in" id="addressInfo">
                                <div class="slds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                                    <apex:dataTable value="{!producerDetailresult.addresslist}" id="ProducerDemographicsTable" var="a">
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Street Address 1">
                                            {!a.StreetAddress}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="City">
                                            {!a.City}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="State">
                                            {!a.State}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Zip Code">
                                            {!a.Zip}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Address Type">
                                            {!a.addressType}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Phone">
                                            {!a.Phone}
                                        </apex:column>
                                    </apex:dataTable>
                                </div>
                            </div>
                        </div>
                    </apex:outputpanel>
                    <!-- Address Section Ends-->                
                    <hr style="margin:0 0"></hr>
                    <!-- Group producer Section starts---->
                    <apex:outputPanel id="producergroupdetails" rendered="{!prodNotFound != '1'}">
                        <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                            <legend class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Groups</legend>
                            <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#groupproducerinfo" style="float:right"></a>
                            <div class="form-element__group collapse in" id="groupproducerinfo">
                                <div class="slds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                                    <apex:dataTable value="{!GroupsList}" id="ProducerGroupsTable" var="gi">
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Group Number">
                                             <apex:outputLink id="groupLink" onclick="if(checkContactName() == true){groupDetailClick('{!gi.groupNumber}','{!gi.groupName}','{!interaction.Id}');}" value="#">{!gi.groupNumber} </apex:outputLink>                                    </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Group Name">
                                           {!gi.groupName}
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="AOR/BOR Relationship Status">
                                            {!gi.status}
                                        </apex:column>                                                                      
                                    </apex:dataTable>
                                </div>
                            </div>
                        </div>
                    </apex:outputpanel>                          
                  <apex:outputPanel rendered="{!prodNotFound != '1'}"> 
                 <div class="slds-form-element__row" style="text-align: center;margin-bottom: 2pc;margin-right:10pc;" >  
                                 <div class="slds-form-element" > 
                                      <apex:commandLink action="{!groupHistoryWindow}" value="Go To Group History" id="linkGroup" style="color:Blue;"  reRender="groupHistory" status="refreshMemberStatus"/>
                                 </div>
                              </div> 
                 </apex:outputpanel>              
             <hr style="margin:0 0"></hr>     
                      
          <apex:outputPanel id="groupHistory" style="display:{!IF((isGroupHistory),'','none')}" >
                <div class ="slds-scope" style="background-color:white">
                    <apex:outputPanel id="isshowGroupALertID">
                        <apex:outputPanel styleClass="popupBackground" layout="block" />
                        <apex:outputPanel styleClass="custPopup_Group" layout="block">
                            <div style="overflow: scroll; min-height: 20pc; width: 60pc">
                                <div class="slds-panel" title="Groups">
                                    <div class="slds-modal__header">
                                        <h1 class="slds-text-heading--medium" style="font-weight:bold">GROUPS</h1>
                                    </div>
                                </div>
                                <apex:outputPanel >
                                    <div id="groupHistoryPopup" class="slds-panel__section slds-table slds-table_bordered slds-table_cell-buffer slds-text-title" columns="1">
                                        <apex:dataTable value="{!GroupHistoryList}" var="groupHist" rendered="{!GroupHistoryList.size != 0}">
                                            <apex:column styleclass="slds-cell-wrap" headerValue="Group Number">
                                                <apex:outputLink id="groupLink" onclick="if(checkContactNameGroupHistory() == true){groupDetailClick('{!groupHist.groupNumber}','{!groupHist.groupName}','{!interaction.Id}');}" value="#">{!groupHist.groupNumber} </apex:outputLink>
                                            </apex:column>
                                            <apex:column styleclass="slds-cell-wrap" headerValue="Group Name" value="{!groupHist.groupName}" style="vertical-align:Top;"/>
                                            <apex:column styleclass="slds-cell-wrap" headerValue="AOR/BOR Relationship Status" value="{!groupHist.status}" style="vertical-align:Top;"/>                                       
                                        </apex:dataTable>
                                    </div>
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!GroupHistoryList.size == 0}">
                                    <div class="slds-panel__section" columns="2">
                                        <apex:outputText value="No Group History" ></apex:outputText>                                                    
                                    </div> 
                                </apex:outputPanel>
                                <div class="slds-modal__footer slds-grid">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td align="right">
                                                    <apex:commandButton id="closeAlertBtnGroupId" value="Close" onclick="closewindow()" reRender="temp" style="float:right;height:2.5pc;width:9pc;margin-left:10px;background: rgb(0, 112, 210); padding: 4px;color:white;font-size:12px;" styleClass="slds-button slds-button--brand slds-not-selected">
                                                    </apex:commandButton>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                              </div>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </div>    
                </apex:outputPanel>
                    <!-- Group producer Section Ends---->                
                    
                    <!-- Case History Information Section Starts-->
                            
                    <apex:outputPanel rendered="{!prodNotFound != '1'}">
                        <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                            <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Case History ({!CaseHistory.size}) <div class="slds-text-heading_small" style="display:inline-block;font-size:14px;margin-inline-start: 20px;font-weight:normal;">
                                <c:ACETCaseCommentsHistoryReport SubjectId="{!producerId}" SubjectName="{!IF((Interaction!=Null&&Interaction.Originator__r!=Null&&Interaction.Originator__r.Name!=Null),Interaction.Originator__r.Name,'')}" SubjectType="Producer"/>
                               </div> 
                           </div>
                            <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#caseInfo" style="float:right"></a>
                            <div class="form-element__group fieldLayout collapse in" id="caseInfo">
                                <div class="scaseInfolds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                                    <apex:dataTable id="caseHistory" value="{!CaseHistory}" var="case" html-cid="CaseHistoryTable">
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Case Number">
                                            <apex:outputLink value="#" onclick="return OpenCaseHistorySubTab('{!Case.Id}', '{!Case.CaseNumber}');"
                                     onmouseover="return caseLinkMouseHoverOver('{!case.Id}');" onmouseout="closehoverPopup();">{!Case.CaseNumber}</apex:outputLink>
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Subject Name">
                                                                <apex:outputText value="{!Case.Contact.Name}" escape="false"/>
                                                             </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.Caller__c}" headerValue="Contact Name"  />
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.CreatedBy.Name}" headerValue="Created By" />
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Created Date & Time">
                                              <apex:outputText value=" {0, date, MM/dd/yyyy hh:mm a}">
                                            <apex:param value="{!Case.CreatedDate + Offset}" />
                                              </apex:outputText>
                                        </apex:column>
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.Topic__c}" headerValue="Topic" />
					<apex:column styleclass="slds-cell-wrap" value="{!case.Original_Type__c}" headerValue="Original Type"/>
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.Status}" headerValue="Status" />
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.Originator_Type__c}" headerValue="Originator Type"  />
                                        <apex:column styleclass="slds-cell-wrap" value="{!case.Interaction_Type__c}" headerValue="Interaction Type" />
                                        <apex:column styleclass="slds-cell-wrap" headerValue="Parent Case" >
                                               <apex:outputLink value="#" onclick="return OpenCaseHistorySubTabLink('{!JSENCODE(case.Parent.Id)}', '{!JSENCODE(case.Parent.CaseNumber)}','{!Interaction.id}','{!Interaction.Name}');">{!case.Parent.CaseNumber}</apex:outputLink>
                                        </apex:column>
                                      <apex:column styleclass="slds-cell-wrap" headerValue="Fulfillment">
                                            <apex:outputText value="Y" rendered="{!IF((case.create_letters__r.size!=null && case.create_letters__r.size > 0),true, false)}"/>
                                            <apex:outputText value="" rendered="{!IF((case.create_letters__r.size!=null && case.create_letters__r.size > 0),false, true)}"/>
                                        </apex:column>
                                       <!-- <apex:column styleclass="slds-cell-wrap" headerValue="Interaction ID">
                                            <apex:outputLink value="#" onclick="return OpenCaseHistorySubTab('{!JSENCODE(case.Interaction__c)}', '{!JSENCODE(case.Interaction__r.Name)}');">{!case.Interaction__r.Name}</apex:outputLink>
                                        </apex:column> -->
                                        
                                    </apex:dataTable>
                                </div>
                            </div>
                        </div>
                    </apex:outputpanel>
                    <hr style="margin:0 0"></hr>
                      <!--Abhinav Balla Changes end for multiple sections-->  
                      <div class="slds-form-element__row" style="text-align: left;margin-bottom: 2pc;margin-left:2pc;" >  
                         <div class="slds-form-element" > 
                              <apex:commandLink onclick="topFunction();" value="Back To Top"  style="color:Blue;" rerender="none" />
                         </div>
                      </div> 
                  </div>
                  
                </section>
                <apex:outputPanel >  
                          <div class="slds-docked-form-footer " style="justify-content: flex-end;width: 15rem;height:3rem;">
                              <c:ACETCaseActions attrShowMisdirectButtonlds="true" /> <!--displayReleatedCasesButton="false"/-->     
                          </div>
                  </apex:outputPanel>
            </div> 
            </div> 
        </div>
                    
        </apex:form>
      </html>
</apex:page>