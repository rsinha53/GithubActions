<apex:page controller="ACETProviderDetailController" sidebar="false" standardStylesheets="false" action="{!Init}" id="pid" showheader="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
    <head>
    <apex:includeScript value="{!$Resource.JQuery}" />
    <apex:includeScript value="{!$Resource.JqueryTableSorter}" />
    <apex:includeScript value="/support/console/38.0/integration.js" />
    <apex:stylesheet value="{!URLFOR($Resource.ACETResources, '/css/m/memberdetail.css')}" />
    <apex:includeScript value="{!URLFOR($Resource.ACETUIResources, '/JS/bootstrap.min.js')}"/>
    <apex:includeScript value="{!$Resource.ACETUIIcons}" /> 
    <style> 
    
    html, body {
        margin: 0;
        height: 100%;
    }
            
    .header {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.07);
      z-index: 1;
    }
    .stage-left {
      width: 4rem;
      transition: width 0.2s ease-in-out 0.05s;
    }
    table.display.datatable tbody{
        background-color:white;
    }
    table.display.dataTable tbody tr.odd > .sorting_1, table.stripe.order-column.dataTable tbody tr.odd > .sorting_1 {
        background-color: #fff;
    }
    table.stripe.dataTable tbody tr.odd, table.display.dataTable tbody tr.odd{
        background-color: #fff;
    }
    table.display.dataTable tbody tr.even > .sorting_1, table.stripe.order-column.dataTable tbody tr.even > .sorting_1{
        background-color: #fff;
    }

    @media (min-width: 1024px) {
      .stage-left.open {
        width: 15rem;
        transition: width 0.1s ease-in-out;
      }
      .stage-left.open .stage-left__text {
        opacity: 1;
        width: auto;
        transition-delay: 0.2s;
      }
    }
    .stage-left li + li {
      margin-top: 0.02rem;
    }
    .stage-left a:not(.button) {
      display: block;
      text-decoration: none;
      white-space: nowrap;
      border-radius: 0.25rem;
      background: transparent;
      padding: 0.25rem;
      transition: background 0.05s linear;
    }
    
    
    .stage-left .stage-left__text {
      opacity: 0;
      width: 0;
      transition: all 0.05s linear;
    }
    .stage-left .slds-icon {
      max-width: initial;
    }
    .stage-container {
      max-height: 100%;
      overflow: hidden;
    }
    .slds-grid--frame {
      min-width: 767px;
      overflow-y: auto;
    }
        
    li{
        margin: 10px 0;
    }
        
    #wrapper {
      background: #f7f9fb;
      overflow: hidden;
      transition: height 200ms;
    }
    
    .pbError {
        font-weight: bold;
        color: #c00 !important;
        text-align: center;
    }
    
    .errorMsg {
        color: #c00 !important;
        
    }
    
    .error
    {
        border-color: #c00 !important;
        box-shadow: 0px 0px 3px #c00;
    }
    
    .slds-scope .slds-size--1-of-2, .slds-scope .slds-size_1-of-2
    {
        width: 15rem;
    }
    
    table.no-footer.dataTable
    {
        margin-left: 1px !important;
    }
    #datatable_wrapper
    {    
        max-width: 136%;
        overflow: auto;
    }
    #datatable
    {
        max-width: 136%; 
        overflow: auto;
    }
    
    .chosen-container
    {
         float:left;
         width:18pc  !important;  
         border: 1px solid #d8dde6; 
    }
    
    .slds-scope .slds-box
    {
        padding: 0.5rem;
    }
    
    .slds-scope .slds-select
    {
        width: auto;
    }
        
    .messageTable
    {
       border: solid #cc0000;
    }
    
    .slds-scope .slds-table th
    {
        font-weight: bold;
    } 
    
    .labelFormat
    {
        font-weight:bold;
        width: 30%;
        text-align: right;
    }
    
    .titleBold
    {
        font-weight:bold !important;
    }
    .slds-scope .slds-table
    {
        color: #54698d;
    }
        
    .collapse
    {
       display:none;
    }
    .collapse.in
    {
        display:block;
    } 
    
    .collapsing
    {
        position:relative;
        height:0;
        overflow:hidden;
            -webkit-transition-timing-function:ease;
                                               -o-transition-timing-function:ease;
                                               transition-timing-function:ease;
            -webkit-transition-duration:.35s;
                                                -o-transition-duration:.35s;
                                                transition-duration:.35s;
            -webkit-transition-property:height,visibility;
                                                -o-transition-property:height,visibility;
                                                transition-property:height,visibility;
     }
     
    a.changeText.collapsed:before
    {
        content:'Show More' ;
        display:block;
        min-width: 80px;
        white-space: nowrap;
    }
    
    a.changeText:before
    {
        content:'Show Less' ;
        display:block;
        min-width: 80px;
        white-space: nowrap;
    }
    
    .chosen-container-multi .chosen-choices
    {
        overflow:hidden !important;
        border: 1px solid #fff;
    }
    
    .chosen-container-active .chosen-choices
    {
        border: 1px solid #fff;
    }
    
    table.dataTable thead th, table.dataTable tfoot th
    {
        color: #54698d;
    }
    .highlights-panel-container {
        width: 100%;
        background: #FFF;
        overflow: hidden;
        display:block;
        height:92vh !important;
        width:15rem !important;
        min-width: 15rem !important;
    }
    .highlights-panel-collapsible {
        min-height: 100px;
    }
    .panel-arrow-down {
        position: absolute;
        top: 45% !important;
        left: 0% !important;
        z-index: 100;
    }
    .panel-arrow-up {
        position: absolute;
        top: 45% !important;
        left: 15rem !important;
        z-index: 100;
    }   
    </style>
    
        
    <style>
        .apexp .bPageBlock .detailList .list .last td, .apexp .bPageBlock .detailList .list .last th,
        .apexp .detailList .list .totalRow td, .apexp .detailList .list .totalRow th
        {
            border-bottom-width: 1px;
        }
    </style>
    
    </head>
    <script type="text/javascript">
        $(document).ready(function() {  
            //init multiple selection dropdown
            $("#callTopicType").chosen(); 
            
            //topic is passed from case fast track
            var topic = '{!JSENCODE($CurrentPage.parameters.topic)}';
            if(topic)   {
                $("#callTopicType").val(topic).trigger("chosen:updated");   
            }     
        var vccdParams2;
            if('{!$CurrentPage.parameters.vccdParams}' != '' ) {
                vccdParams2 =  JSON.parse('{!$CurrentPage.parameters.vccdParams}');
                if (vccdParams2.callTopic != '') {
                    $("#callTopicType").val(vccdParams2.callTopic).trigger("chosen:updated");
                }
            }                           
        });
        
        
       function topFunction() {
            $("div.stage-main").scrollTop(0);
       }
    
        var RefreshAA = false;
        var RefreshAffiliations = false;
        function ToggleAdditionalAddress(pbSection) {
            if (!RefreshAA) {
                showMask();
                RefreshAA = true;
                GetAdditionalAddresses();
            }
        }
        
        function ToggleAffiliations(pbSection) {
            if (!RefreshAffiliations) {
                showMask();
                RefreshAffiliations = true;
                GetAffiliations();
            }
        }    
        var callagreementsCallOutMade = false;
        function callagreements(){
         
            if(!callagreementsCallOutMade){      
                
                //$("#Contracts").show();
                //$("#contractsContent").removeClass('collapsed'); 
                showMask();
                callagreementsCallOutMade = true;
                GetAgreements();
            }
          
        }
        function showContracts(){
             $("#contractsContent").click();    
        }
        function testSetTabTitle() {
            if ('{!JSENCODE(Interaction.Originator_Type__c)}' == 'Other') {
                sforce.console.getFocusedPrimaryTabId(function(result) {
                    sforce.console.setTabTitle('Detail - ' + '{!JSENCODE(Interaction.Third_Party__r.LastName__c)}', result.id);
                });
                
            }    
        }
    
        var pageLoad = window.onload;
        window.onload = function() {
            if(pageLoad) {
                pageLoad();
            }
            testSetTabTitle();
        }  
        
        var ProviderDetailPrimaryTabId = '';        
        var MemberSearchSubTabId = '';
        
        function memberSearchClick()
        {           
            var vccdParams = '{!JSENCODE($CurrentPage.parameters.vccdParams)}'; 
            var hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
            console.log('hightlightPanelInfo::' + hightlightPanelInfo);
            var url1 = '/apex/ACETMemberSearch?InteractionId={!JSENCODE(Interaction.Id)}'+'&vccdParams='+vccdParams + '&ProvTypeCode={!ProviderTypeCode}&isFromProvider=true'+'&providerTINStatusCode={!JSENCODE(providerTINStatusCode)}'+'&addressId={!JSENCODE(addressId)}'+'&ProviderId={!JSENCODE(Interaction.Originator__r.EID__c)}'+'&ProvideraddressTypeCode={!JSENCODE(ProvideraddressTypeCode)}'+'&ProviderTypeCode={!JSENCODE(ProviderTypeCode)}'+'&providerTINTypeCode={!JSENCODE(providerTINTypeCode)}'+'&TaxId={!JSENCODE(Interaction.Originator__r.Tax_ID__c)}';
            url1 +='&additionalInfo=' + hightlightPanelInfo;
           
            sforce.console.getEnclosingPrimaryTabId(OpenMemberSearchSubTab);
            return false;
        }
        
        var OpenMemberSearchSubTab = function OpenMemberSearchSubTab(result) {
            //Now that we have the primary tab ID, we can open a new subtab in it
            ProviderDetailPrimaryTabId = result.id;
            var interactionTypeVar = '{!JSENCODE(Interaction.Interaction_Type__c)}';
            //Added by vinaybabu for Highlightpanel Issue.
            var showTabId = function showTabId(result) {
            //Display the subtab IDs
                //alert('Subtab IDs: ' + result.ids);
                if(!result.ids.indexOf(MemberSearchSubTabId) > -1){
                    MemberSearchSubTabId = '';
                }
                if (MemberSearchSubTabId == '') {
                    var vccdParams = '{!JSENCODE($CurrentPage.parameters.vccdParams)}';
                    var hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
                
                    var url1 = '/apex/ACETMemberSearch?InteractionId={!JSENCODE(Interaction.Id)}'+'&vccdParams='+vccdParams+'&interactionType='+interactionTypeVar + '&ProvTypeCode={!ProviderTypeCode}&isFromProvider=true'+'&providerTINStatusCode={!JSENCODE(providerTINStatusCode)}'+'&addressId={!JSENCODE(addressId)}'+'&ProviderId={!JSENCODE(Interaction.Originator__r.EID__c)}'+'&ProvideraddressTypeCode={!JSENCODE(ProvideraddressTypeCode)}'+'&ProviderTypeCode={!JSENCODE(ProviderTypeCode)}'+'&providerTINTypeCode={!JSENCODE(providerTINTypeCode)}'+'&TaxId={!JSENCODE(Interaction.Originator__r.Tax_ID__c)}';
                    console.log('URL--->'+url1);
                    url1 +='&additionalInfo=' + hightlightPanelInfo;
                    
                    sforce.console.openSubtab(ProviderDetailPrimaryTabId, url1 , true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProviderMemberSearch');
                }
                else {
                    sforce.console.focusSubtabById(MemberSearchSubTabId, FocusMemberSearchSubTabSuccess);
                }  
            };
            sforce.console.getSubtabIds(ProviderDetailPrimaryTabId,showTabId);
            
        };

        
        var OpenMemberSearchSubTabSuccess = function OpenMemberSearchSubTab(result) {
            MemberSearchSubTabId = result.id;
        }
        
        var FocusMemberSearchSubTabSuccess = function FocusMemberSearchSubTabSuccess(result) {
            if (!result.success) {
            var mid = '{!JSENCODE($CurrentPage.parameters.memberId)}';
            var url1 = '/apex/ACETMemberSearch?InteractionId={!JSENCODE(Interaction.Id)}'+'&memid='+mid + '&ProvTypeCode={!ProviderTypeCode}';
              console.log('URL--->'+url1);
                sforce.console.openSubtab(ProviderDetailPrimaryTabId, url1, true, 'Member Search', null, OpenMemberSearchSubTabSuccess, 'ProviderMemberSearch');
            }
        }
        
        function OpenCaseHistorySubTab(RecordId, RecordName) {      
            if (ProviderDetailPrimaryTabId == '') {
                sforce.console.getEnclosingPrimaryTabId(function(result) {
                    ProviderDetailPrimaryTabId = result.id;
                    sforce.console.openSubtab(ProviderDetailPrimaryTabId, '/' + RecordId, true, RecordName, null, OpenCaseHistorySubTabSuccess, RecordName);    
                });
            }
            else {
                sforce.console.openSubtab(ProviderDetailPrimaryTabId, '/' + RecordId, true, RecordName, null, OpenCaseHistorySubTabSuccess, RecordName);    
            }
            return false;
        }
        
        var OpenCaseHistorySubTabSuccess = function OpenCaseHistorySubTabSuccess(result)    {
            //
        }
        
        function OpenInteractioInPrimaryTab(RecordId, RecordName) {      
            if (ProviderDetailPrimaryTabId == '') {
                sforce.console.getEnclosingPrimaryTabId(function(result) {
                    ProviderDetailPrimaryTabId = result.id;
                    sforce.console.openSubtab(ProviderDetailPrimaryTabId, '/' + RecordId, true, RecordName, null, OpenInteractioInPrimaryTab, RecordName);    
                });
            }
            else {
                sforce.console.openSubtab(ProviderDetailPrimaryTabId, '/' + RecordId, true, RecordName, null, OpenInteractioSubTabSuccess, RecordName);    
            }
            return false;
        }
        
        
        var OpenInteractioSubTabSuccess = function OpenInteractioInPrimaryTab(result)   {
            //
        }
        function OpenCaseHistorySubTabLink(RecordId, RecordName,intId, intName) {   
        sforce.console.getEnclosingPrimaryTabId(function(result) {
        sforce.console.openSubtab(result.id, '/' + RecordId+'?intId='+intId+'&intName='+intName, true, RecordName, null, OpenCaseHistorySubTabSuccess, RecordName);    
        
        return false;
    });
    }
        
        var isActive = true;
        var activeChecker = 0;
        function checkIsActive(){
            console.log('HERE checker ' + activeChecker + ',' + isActive);
            if(activeChecker == 0){
                isActive = true;
            } else if(activeChecker > 0){
                isActive = false;
            }
            activeChecker = activeChecker + 1;
            console.log('HERE checker1 ' + activeChecker + ',' + isActive);
        }
        
        
        function openTopicDetail()  {  
            $("#errorMsgDiv").html("");
            var hightlightPanelInfo = $("[id$='highlightPanelInfo']").val();
            var errorMsg = "You must enter a value.";
            
            var callTopics = $("#callTopicType").chosen().val();
            activeChecker = 0;
            var callTopicsList = '';
            $("#callTopicType_chosen").find(":nth-child(1)").find("li.search-choice").each(function(){
                if(callTopicsList == '' || callTopicsList == null){
                    callTopicsList = $(this).find("span").html();
                } else {
                    callTopicsList = callTopicsList + ',' + $(this).find("span").html();
                }
				
				 var vccdParams2;
            if('{!$CurrentPage.parameters.vccdParams}' != '' ) {
                vccdParams2 =  JSON.parse('{!$CurrentPage.parameters.vccdParams}');
                if (vccdParams2.callTopic != '') {
                    $("#callTopicType").val(vccdParams2.callTopic).trigger("chosen:updated");
                }
            }
				
            });
            callTopicsList = callTopicsList.split(',');
            if(callTopicsList == null || callTopicsList == '' || callTopicsList == undefined)
                callTopicsList = false;
            $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();        
            
            if (callTopicsList) {
                for (var i = 0; i < callTopicsList.length; i++) {
                    var callTopic = callTopicsList[i];         
                    var urlParam = 'interactionId={!JSENCODE(Interaction.Id)}';
                    var fastTrack = '{!JSENCODE($CurrentPage.parameters.fastTrack)}';
                   
                    urlParam  += '&ProviderId={!JSENCODE(Interaction.Originator__r.EID__c)}';
                    urlParam += '&contactId={!JSENCODE(Interaction.Originator__r.Id)}';
                    urlParam +='&additionalInfo=' + hightlightPanelInfo;
                    urlParam +='&addressInfo={!JSENCODE(ProviderTypeCode)}';
                    urlParam += '&fastTrack=' + fastTrack;
                   
                    
                    if (callTopic == 'Provider Other Inquiry')  {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                            var url = '/apex/ACETProviderOtherInquiry?'+ urlParam;
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Provider Other Inquiry', null);
                        });
                    } else if (callTopic == 'Provider Lookup')  {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                            var url = '/apex/ACETProviderLookup?'+ urlParam;
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Provider Lookup', null);
                        });                   
                    } else if (callTopic == 'View Payments')    {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                            var url = '/apex/ACETClaimPayment?'+ urlParam;
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Payment Search', null);
                        });                    
                    } else if (callTopic == 'Communications')   {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                            var url = '/apex/ACETCommunicationSearchPage?'+ urlParam + '&ProvTypeCode={!JSENCODE(ProviderTypeCode)}&ProvFlowOnly=TRUE';
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Communications Search', null);
                            
                        });
                    } else if (callTopic == 'Materials Request')    {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                            var url = '/apex/ACETFormsHistory?'+ urlParam + '&ProvTypeCode={!JSENCODE(ProviderTypeCode)}';
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Materials Request', null);
                        });                    
                    }
                    else if (callTopic == 'Provider Fee Schedule')    {
                        sforce.console.getFocusedPrimaryTabId(function(result)  {
                           // var url = '/apex/ACETProviderFeeSchedule?'+ urlParam +'&ProviderTypeCode ={!JSENCODE(ProviderTypeCode)}' ;
                            var url = '/apex/ACETProviderFeeSchedule?'+ urlParam+'&ProviderTypeCode={!JSENCODE(ProviderTypeCode)}'+'&providerTINStatusCode={!JSENCODE(providerTINStatusCode)}'+'&addressId={!JSENCODE(addressId)}'+'&ProvideraddressTypeCode={!JSENCODE(ProvideraddressTypeCode)}'+'&providerTINTypeCode={!JSENCODE(providerTINTypeCode)}'+'&TaxId={!JSENCODE(Interaction.Originator__r.Tax_ID__c)}';
                           
                            //sforce.console.openSubtab(result.id, '/apex/ACETProviderFeeSchedule?'+ urlParam + '&' +'&product='+product);
                            checkIsActive();
                            sforce.console.openSubtab(result.id , url, isActive,'Provider Fee Schedule', null);
                        });                    
                    }    
                }
                //clear selection
                $("#callTopicType").val('').trigger("chosen:updated");
                return false;
            }
            else
            {
                $("#callTopicType").addClass("error").parent().append('<div class="errorMsg"><br/><br/><strong>Error:</strong> ' + errorMsg + '</div>'); 
                return false; 
            }
        }    
        
        function showMask() {
            $(".popupBackground-tp").css("display","block");
        }
        
        function hideMask() {
           $(".popupBackground-tp").css("display","none");
        }
    
        //do not focus on any field
        function setFocusOnLoad() {}
    
        function ShowLoader() {
            $('.loader').fadeIn('fast');
        }

        function HideLoader() {
            $('.loader').fadeOut('fast');
        }
        
        function removeErrorTopic(){
            console.log('Inside removeerror');
            $("#callTopicType").removeClass("error").parent().find(".errorMsg").remove();
        } 
        var scrollHighlightsPanel = function(){
            $(".highlights-panel-container").toggle("slide");
            $("[id$='btnMisdirectCaseLds']").parent().parent().parent().parent().parent().parent().parent().parent().parent().toggle("slide");
            if($(".panel-arrow-down").hasClass("show-arrow")){
                 $(".panel-arrow-down").addClass("hide-arrow").removeClass("show-arrow");
                 $(".panel-arrow-up").addClass("show-arrow").removeClass("hide-arrow");
             }
             else{
                 $(".panel-arrow-down").removeClass("hide-arrow").addClass("show-arrow");
                 $(".panel-arrow-up").removeClass("show-arrow").addClass("hide-arrow");
             }
        };
        function initDataTables(dataTableName) {
         if (!acet.datatables[dataTableName].dataTableInited) {
            acet.datatables[dataTableName].initDatatable();
            acet.datatables[dataTableName].processDatatable = function(row, data, dataIndex) {
            var statusCode = data["addressStatusCode"];
            var addressTypeCode = data["addressTypeCode"];
            console.log('statusCode' +statusCode);
            if(statusCode == 'A') {
               console.log('status');
               $(row).find(":nth-child(1)").html('<img src="{!URLFOR($Resource.ACETResources, '/img/m/active.jpg')}"></img>');
              }
            else {
                $(row).find(":nth-child(1)").html('<img src="{!URLFOR($Resource.ACETResources, '/img/m/inactive.jpg')}"></img>');
            }
           };
        }
        }
       function initContractDataTables(dataTableName) {
        if (!acet.datatables[dataTableName].dataTableInited) {
            acet.datatables[dataTableName].initDatatable();
            acet.datatables[dataTableName].processDatatable = function(row, data, dataIndex) {
            var status = data["Contract_Status"];
            console.log('status' +status);
            if(status == 'A') {
                  console.log('status');
                  console.log('row'+$(row).length);
                  $(row).find(":nth-child(1)").html('<img src="{!URLFOR($Resource.ACETResources, '/img/m/active.jpg')}" style="max-width:50px;"></img>');
              }
           else if(status == 'I') {
                 $(row).find(":nth-child(1)").html('<img src="{!URLFOR($Resource.ACETResources, '/img/m/inactive.jpg')}" style="max-width:50px;"></img>');
               }
           };
       } 
     }
    </script>
    <apex:form id="frmid">
        <div class="slds-scope">
        <apex:slds />
        <apex:actionFunction name="GetAdditionalAddresses" action="{!CallFindMedicalProvider}" reRender="pbtAdditionalAddresses" status="AjaxLoader" onComplete="initDataTables('datatableAddress');"/>
        <apex:actionFunction name="GetAffiliations" action="{!CallFindAffiliations}" reRender="pbtAffiliations" status="AjaxLoader" onComplete="acet.datatables['datatableAffiliation'].initDatatable();" />
        <apex:actionFunction name="GetAgreements" action="{!CallFindAgreements}" reRender="pbtAgrmnts" status="AjaxLoader" onComplete="initContractDataTables('datatableContracts');" />
        <apex:actionFunction name="afOnPageLoad" action="{!CallWSOnPageLoad}" rerender="pbsGeneralInfo,hlPanel,pbsPremiums,pbsSpecialties,providerErrorMsges" status="AjaxLoader" onComplete="checkActive();"/>
        
        <!-- Changes start by Abhinav Balla  -->
        <div class="slds-grid slds-grid--frame slds-grid--vertical">
        <!-- Stage Container -->
        <div class="stage-container slds-grid slds-nowrap slds-size--1-of-1">
        
        <!-- Stage Left - Navigation -->
        <div class="highlights-panel-container">
               <div class="highlights-panel-collapsible">
                    <nav class="stage-left slds-size--1-of-2 slds-shrink-none slds-scrollable--y slds-page-header slds-p-around--small open" 
                         style="display:block;height:92vh;overflow:scroll;">
                       <ul role="navigation" class="slds-has-block-links" >
                           <li>
                               <apex:outputPanel id="hlPanel" >
                                   <input id="highlightPanelInfo" type = "hidden" value="{!hpAdditionInfoStr}"/>
                                   <!-- <apex:inputHidden id="highlightPanelInfo" /> -->      
                                   <c:ACETInteractionHighlightsPanel_LDS InteractionAtt="{!Interaction}" SubjectAtt="{!Subject}" TotalProviderAlerts="{!lstProviderAlert}" AdditionalInfoAtt="{!AdditionalInfo}" ></c:ACETInteractionHighlightsPanel_LDS>
                               </apex:outputPanel>
                               
                               <apex:outputPanel id="casedetailpopupPanel">
                                    <c:ACETCaseDetail />
                               </apex:outputPanel> 
                           </li>
                       </ul>
                   </nav>
               </div>
        </div>
        
       <section class="stage slds-grid slds-grid--vertical slds-nowrap " style="overflow:hidden; min-height:74vh ; max-height:100vh">
              <div class="slds-box slds-theme--inverse" >
                <apex:outputPanel layout="none" rendered="{!Interaction.Originator_Type__c == 'Provider' || Interaction.Originator_Type__c == 'Other'}">
                    <div>
                    <apex:image value="{!URLFOR($Resource.ACETUIIcons,'Provider.bmp')}" width="20" height="20"/> Provider Detail </div>
                </apex:outputPanel>
               </div>
              <div id="errorMsgDiv" style="margin-left: 31%"></div>
          <!-- Stage Main -->
              <div class="stage-main slds-panel slds-grid slds-wrap slds-grow slds-scrollable--y slds-form--compound" style="display:block;height:100vh !important;width:100%;background-color: white;" role="main">
                  
                  <br/>
                  <div class="panel-arrow-down hide-arrow" onclick="scrollHighlightsPanel();" auto-doc-item="false">
                        <img class="arrow-down" src="{!URLFOR($Resource.highlightspanelarrows, '/hparrowright.png')}" border="0" />
                    </div>
                    <div class="panel-arrow-up show-arrow" onclick="scrollHighlightsPanel();" auto-doc-item="false">
                        <img class="arrow-up" src="{!URLFOR($Resource.highlightspanelarrows, '/hparrowleft.png')}" border="0" />
                    </div>
                  <div class="form-element__group" style="margin-left:10%">
                        <div class="slds-form-element__row" style="float:left">
                          <div class="slds-form-element">
                                   <apex:outputLabel value="Topic" styleClass="slds-form-element__label" ></apex:outputLabel>
                                    <apex:outputPanel layout="none" id="calltopicdropdown" styleClass="slds-form-element__control" >                                                        
                                             <apex:outputPanel styleClass="requiredInput" layout="block" >
                                                <apex:outputPanel styleClass="requiredBlock" layout="block"/>
                                                <select id="callTopicType" multiple="true" data-placeholder="Select Topic" onchange="removeErrorTopic()">
                                                    <apex:repeat value="{!CallTopicOptions}" var="opt">                                                    
                                                        <option value="{!opt.Value}"><span class = "select-multi">{!opt.Label}</span></option>                                                                                              
                                                    </apex:repeat>                                                                                                                          
                                                 </select>                                                    
                                            </apex:outputPanel>
                                     </apex:outputPanel>
                          </div>
                     </div>
                  </div> 
                 
                  <br/>
                     <div class="slds-form-element__row">  
                         <div class="slds-form-element" style="margin-top:3pc;margin-left: 6pc;">
                               <apex:commandButton id="OpenCallTOpic" value="Open Topic" onclick="openTopicDetail();" styleClass="btn slds-button slds-button--brand slds-not-selected" style="margin:left;" reRender="dummyPanel" />
                         </div>
                       </div>

                  
                  <br/>
                  <hr style="margin:2px 2px"></hr>
                   
                  <!--section starts-->
                   <apex:outputPanel id="pbsGeneralInfo" > 
                       <div class="slds-panel__section"  style="padding: 0 2pc 1pc;">   
                           <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">General Information</div>  
                           <!--<a href="#" class="collapse" style="float:right">Show Less </a>-->
                           <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#genInfo" style="float:right"></a>
                           <div class="form-element__group fieldLayout collapse in" id="genInfo">  
                               <apex:outputpanel rendered="{!Interaction.Originator_Type__c == 'Other'}">
                                   
                                   <div class="slds-form-element__row">  
                                       <!-- ADD FIELDS -->  
                                       <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Last Name or Facility/Group Name :"></apex:outputLabel>  
                                           <apex:outputText value="{!PNFLastName}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                       </div>  
                                       <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="First Name :"></apex:outputLabel>  
                                           <apex:outputText value="{!PNFFirstName}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                       </div>
                                   </div>
                                   <div class="slds-form-element__row">  
                                       <!-- ADD FIELDS -->  
                                       <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Tax Id :"></apex:outputLabel>  
                                           <apex:outputText value="{!PNFTaxId}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                       </div>  
                                       <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label labelFormat" value="NPI :"></apex:outputLabel>  
                                           <apex:outputText value="{!PNFNPI}" styleClass="slds-form-element__label slds-text-body--small"/>  
                                       </div>
                                   </div>
                                   <div class="slds-form-element__row">  
                                       <!-- ADD FIELDS -->  
                                       <div class="slds-form-element " >  
                                           <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Phone Number :"></apex:outputLabel>  
                                           <apex:outputText value="{!PNFPhoneNumber}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                       </div>
                                       <!-- below empty div is needed for allignment -->
                                       <div class="slds-form-element " >
                                       </div>
                                   </div>
                               </apex:outputPanel>
                               <!--HCO-->
                               
                               <apex:outputPanel style="width:50%" rendered="{!(ProviderTypeCode == 'HCO' && Interaction.Originator_Type__c == 'Provider')}">
                                   <div class="slds-form-element__row"> 
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Facility/Group Name"></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.LastName}"  styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                           </apex:outputpanel>
                                       </div>
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel value=""/>  
                                               <apex:outputText value=""/>  
                                           </apex:outputpanel>
                                       </div>
                                   </div>
                               </apex:outputPanel>
                               <apex:outputPanel rendered="{!(Interaction.Originator_Type__c == 'Provider' && ProviderTypeCode == 'HCP')}">
                                   <div class="slds-form-element__row">  
                                       
                                       <div class="slds-form-element " >
                                           <apex:outputPanel style="width:50%" >
                                               
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Last Name"></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.LastName}"  styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                           </apex:outputPanel>
                                       </div>
                                       <div class="slds-form-element " >
                                           <apex:outputPanel style="width:50%" >
                                               
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="First Name"></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.FirstName}"  styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                           </apex:outputPanel>
                                       </div>
                                   </div> 
                               </apex:outputPanel>
                               <apex:outputPanel rendered="{!Interaction.Originator_Type__c == 'Provider'}">
                                   <div class="slds-form-element__row">
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Tax ID" for="taxId"></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.TaxID}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>
                                           </apex:outputpanel>
                                       </div>
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="NPI" for="npi" ></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.NPI}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>
                                           </apex:outputpanel>
                                       </div>
                                   </div>
                                   
                                   <div class="slds-form-element__row">  
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Provider ID" for="prov_id" ></apex:outputLabel>  
                                               <apex:outputText value="{!ProviderDetail.GeneralInfo.ProviderID}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>
                                           </apex:outputpanel>
                                       </div>
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="TIN  Owner" for="pay2indv" ></apex:outputLabel>  
                                               <apex:outputText value="{!providerDetail.generalInfo.providerTINOwner}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>
                                           </apex:outputpanel>
                                       </div>
                                   </div>
                                   <div class="slds-form-element__row">  
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel styleClass="slds-form-element__label slds-text-body_regular labelFormat" value="Platinum Provider" for="plat_prov"></apex:outputLabel>  
                                               <apex:outputText id="platinumProviderData" value="{!ProviderDetail.GeneralInfo.PlatinumProvider}" styleClass="slds-form-element__label slds-form-element__control slds-text-body--small"/>  
                                           </apex:outputpanel>
                                       </div>
                                       <div class="slds-form-element " >
                                           <apex:outputpanel >
                                               <apex:outputLabel value=""></apex:outputLabel>  
                                           </apex:outputpanel>
                                       </div>
                                   </div>
                               </apex:outputPanel>
                               
                               <div class="slds-form-element__row" style="text-align: center;margin-bottom: 2pc;margin-right:10pc;">  
                                   <div class="slds-form-element" > 
                                       <center><apex:commandLink value="Go To Member Search" onclick="return memberSearchClick();" /></center>
                                   </div> 
                               </div>     
                           </div>
                       </div>
                   </apex:outputpanel>
                   <apex:outputpanel rendered="{!Interaction.Originator_Type__c == 'Provider'}">
                   <hr style="margin:2px 2px" ></hr> 
                   </apex:outputpanel>
                   <!--Additional Addresses Section-->
                   <apex:outputpanel rendered="{!Interaction.Originator_Type__c == 'Provider'}">
                      
                      <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1" >
                          <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Additional Addresses</div>
                          <a href="javascript:void(0);" class="changeText collapsed" data-toggle="collapse" data-target="#addrInfo" style="float:right" onclick="ToggleAdditionalAddress(this);"></a>
                          <div class="form-element__group fieldLayout collapse" id="addrInfo">
                              <div class="slds-table slds-table_bordered slds-table_cell-buffer" columns="1"><!-- rendered="{!Interaction.Originator_Type__c == 'Provider'}">-->
                                    <c:ACETDataTable id="pbtAdditionalAddresses" attrDatatableWrapper="{!AddrDTWrapper}" attrDataTableName="Address"/> 
                              </div>
                          </div>
                       </div>
                             
                   </apex:outputpanel>
                   <!-- Additional Addresses Section Ends-->
                   
                  
                   <!--Specialties Section Starts--> 
                 <apex:outputpanel id="pbsSpecialties" rendered="{!(Interaction.Originator_Type__c == 'Provider' && ProviderTypeCode == 'HCP')}"> 
                  <hr style="margin:2px 2px"></hr>
                     <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                      <legend class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Specialties</legend>
                      <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#Specialties" style="float:right"></a>
                      <div class="form-element__group collapse in" id="Specialties">
                       <div class="slds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                         <apex:dataTable value="{!ProviderDetail.specialities}" id="SpecialtiesTable" var="objPratise">
                              <apex:column styleclass="slds-cell-wrap" headerValue="Active">
                                <img src="{!URLFOR($Resource.ACETResources, '/img/m/' +objPratise.statusCode+'.jpg')}" style="max-width:50px;" />
                             </apex:column> 
                            <apex:column styleclass="slds-cell-wrap" headerValue="Primary Specialty">
                                {!objPratise.primarySpeciality}
                            </apex:column>       
                            <apex:column styleclass="slds-cell-wrap" headerValue="Specialty">
                               {!objPratise.speciality}
                            </apex:column>                                 
                            <apex:column styleclass="slds-cell-wrap" headerValue="Board Certification">
                                {!objPratise.boardCert}
                            </apex:column>
                            <apex:column styleclass="slds-cell-wrap" headerValue="Cancel">
                                {!objPratise.cancelDate}
                            </apex:column>
                        </apex:dataTable>
                           </div>
                        </div>
                    </div>
            </apex:outputpanel>
             <!--Specialties Section Ends--> 
             <apex:outputpanel rendered="{!(Interaction.Originator_Type__c == 'Provider' && ProviderTypeCode == 'HCP')}">
                 <hr style="margin:2px 2px"></hr>
             </apex:outputpanel>
              <!--UnitedHealth Premium Designation Section Starts--> 
              <apex:outputpanel id="pbsPremiums" rendered="{!(Interaction.Originator_Type__c == 'Provider' && ProviderTypeCode == 'HCP')}">
                  <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                      <legend class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">UnitedHealth Premium Program</legend>
                      <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#UhPreDesig" style="float:right"></a>
                     <div class="form-element__group collapse in" id="UhPreDesig">
                       <div class="slds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                         <apex:dataTable value="{!providerDetail.unitedPremiums}" id="UnitedHealthPDTable" var="objUnitedHealth">
                            <apex:column styleclass="slds-cell-wrap" headerValue="Premium Designation">
                                {!objUnitedHealth.premiumDesignation}
                            </apex:column>
                            <!--<apex:column styleclass="slds-cell-wrap" headerValue="Premium Specialty">
                                {!objUnitedHealth.premiumSpeciality}
                            </apex:column>-->
                            <apex:column styleclass="slds-cell-wrap" headerValue="Effective">
                                {!objUnitedHealth.effectiveDate}
                            </apex:column>
                            <apex:column styleclass="slds-cell-wrap" headerValue="Cancel">
                                {!objUnitedHealth.premiumCancelDate}
                            </apex:column>
                          </apex:dataTable>
                           </div>
                        </div>
                    </div>
            </apex:outputpanel>
            <!-- UnitedHealth Premium Designation Section Ends-->
           
            <!-- Active Affiliations Section Starts -->
            <apex:outputPanel id="pbsAffiliations" rendered="{!IF(strType=='ProviderNotFound',true,false)}">
                <hr style="margin:2px 2px"></hr>
                <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1" >
                    <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Active Affiliations</div>
                    <a href="javascript:void(0);" class="changeText collapsed" data-toggle="collapse" data-target="#activeAff" style="float:right" onclick="ToggleAffiliations(this);"></a>
                    <div class="form-element__group fieldLayout collapse" id="activeAff">
                        <div class="slds-table slds-table_bordered slds-table_cell-buffer" style="background:white" columns="1">
                            <c:ACETDataTable id="pbtAffiliations" attrDatatableWrapper="{!AffDTWrapper}" attrDataTableName="Affiliation" />
                        </div>
                     </div>
                 </div>
             </apex:outputPanel>
             <!-- Active Affiliations Section Ends -->
            <apex:outputPanel rendered="{!IF(strType=='ProviderNotFound',true,false)}">
                <hr style="margin: 2px 2px"></hr>
            </apex:outputPanel>
             <!-- Contracts Section Starts -->
             <apex:outputPanel id="pbsContracts" rendered="{!IF(strType=='ProviderNotFound',true,false)}">
                    <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1">
                       <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Contracts</div>
                       
                       <a href="javascript:void(0);" id="contractsContent" class="changeText collapsed" data-toggle="collapse" data-target="#Contracts" style="float:right" onclick="callagreements();"></a>
                         <div class="form-element__group fieldLayout collapse" id="Contracts">
                           <div class="slds-form-element__control">
                              <apex:repeat value="{!filterStatus}" var="status">
                               <span class="slds-radio" style="display: inline-block !important;">
                                <input type="radio" id="status-{!status.value}" name="Status" value="{!status.value}" onchange="setTable(this.value);"/>
                                  <label class="slds-radio__label" for="status-{!status.value}">
                                   <span class="slds-radio--faux"></span>
                                   <span class="slds-form-element__label">{!status.label}</span>
                                </label>
                              </span>
                          </apex:repeat>
                           
                        </div>
                        <div class="slds-table slds-table_bordered slds-table_cell-buffer" style="background:white" columns="1">
                            <apex:outputPanel id="pbtAgrmnts">
                                <c:ACETDataTable attrDatatableWrapper="{!AgrmntsDTWrapper}" attrDataTableName="Contracts" />
                            </apex:outputPanel>
                           </div>
                        </div>
                    </div>  
            </apex:outputpanel>   
            <!-- Contracts Section Ends-->
              
               <!-- Case History Information Section Starts-->
                   <apex:outputpanel rendered="{!IF(strType=='ProviderNotFound',true,false)}">
                       <hr style="margin: 2px 2px"></hr>
                      <div class="slds-panel__section" style="padding: 0 2pc 1pc;" columns="1" rendered="{!Interaction.Originator_Type__c == 'Provider'}">
                      <div class="slds-form-element__label slds-text-heading_medium titleBold" style="margin-bottom: 1pc;">Case History ({!caseListSize}) <div class="slds-text-heading_small" style="display:inline-block;font-size:14px;margin-inline-start: 20px;font-weight:normal;"><c:ACETCaseCommentsHistoryReport SubjectId="{!Interaction.Originator__r.Tax_ID__c}" SubjectName="{!Interaction.Originator__r.Name}" SubjectType="Provider"/></div></div>
                      <a href="javascript:void(0);" class="changeText" data-toggle="collapse" data-target="#caseInfo" style="float:right"></a>
                      <div class="form-element__group fieldLayout collapse in" id="caseInfo">
                      <div class="scaseInfolds-table slds-table_bordered slds-table_cell-buffer" columns="1">
                      <apex:dataTable id="caseHistory" value="{!HistoryCases}" var="case" html-cid="CaseHistoryTable">
                    <apex:column styleclass="slds-cell-wrap" headerValue="Case Number">
                        <apex:outputLink value="#"
                            onclick="return OpenCaseHistorySubTab('{!Case.SFDCId}', '{!Case.CaseNumber}');"
                            onmouseover="return caseLinkMouseHoverOver('{!Case.SFDCId}');" onmouseout="closehoverPopup();">{!Case.CaseNumber}</apex:outputLink>
                    </apex:column>
                    <apex:column styleclass="slds-cell-wrap" headerValue="Subject Name">
                        <apex:outputText value="{!Case.SubjectName}" escape="false"/>
                    </apex:column>
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.contactName}" headerValue="Contact Name" />
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.CreatedBy}" headerValue="Created By" />
                    <apex:column styleclass="slds-cell-wrap" headerValue="Created Date & Time">
                        <apex:outputText value=" {0, date, MM/dd/yyyy hh:mm a}">
                            <apex:param value="{!Case.CreatedDate + Offset}" />
                        </apex:outputText>
                    </apex:column>
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.CallTopic}" headerValue="Topic" />
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.Status}" headerValue="Status" />
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.OriginatorType}"
                        headerValue="Originator Type" />
                    <apex:column styleclass="slds-cell-wrap" value="{!Case.InteractionType}"
                        headerValue="Interaction Type" />
                    <apex:column styleclass="slds-cell-wrap" headerValue="Parent Case" >
                        <apex:outputLink value="#" onclick="return OpenCaseHistorySubTabLink('{!JSENCODE(case.caseParentId)}', '{!JSENCODE(case.caseParentNumber)}','{!Interaction.id}','{!Interaction.Name}');">{!case.caseParentNumber}</apex:outputLink>
                    </apex:column> 
                     <apex:column styleclass="slds-cell-wrap" headerValue="Fulfillment">
                        <apex:outputText value="Y" rendered="{!IF((Case.FullfillmentSize > 0),true, false)}"/>
                        <apex:outputText value="" rendered="{!IF((Case.FullfillmentSize > 0),false, true)}"/>
                    </apex:column>
                    <apex:column styleclass="slds-cell-wrap" headerValue="Interaction ID">
                        <apex:outputLink value="#"
                            onclick="return OpenInteractioInPrimaryTab('{!Case.InteractionSFDCId}', '{!Case.InteractionName}');">{!Case.InteractionName}</apex:outputLink>
                    </apex:column>
                    
                    </apex:dataTable>
                            </div>
                        </div>
                    </div>                             
                  </apex:outputpanel>
                  <!-- Case History Information Section Ends-->
                  <hr style="margin:0 0"></hr>
                     <div class="slds-form-element__row" style="text-align: left;margin-bottom: 2pc;margin-left:2pc;" >  
                         <div class="slds-form-element" > 
                              <apex:commandLink onclick="topFunction();" value="Back To Top" style="color:Blue;" rerender="none" />
                         </div>
                     </div> 
                  <apex:outputPanel >  
                      <div class="slds-docked-form-footer " style="justify-content:flex-end;width:15rem;">
                          <c:ACETCaseActions Save="{!Save}"
                            SaveAndClose="{!SaveAndClose}" attrShowSaveAndCloseButton="false"
                            attrShowSaveButton="false" attrShowMisdirectButtonlds="true"
                            attrShowCancelButton="false"
                            attrSourceOriginator="{!Interaction.Interaction_Type__c}"
                            attrInteractionId="{!Interaction.Id}" attrSubjectId="{!Subject.Id}"
                            attrRefreshNavigationTab="true" /> <!--displayReleatedCasesButton="false"/-->
     
                      </div>
                  </apex:outputPanel>
                  <hr style="margin:2px 2px"></hr>
              </div>
              
          </section>
       </div> 
    </div> 
  </div>                 
 </apex:form>
 </html>   
    <apex:includeScript value="{!URLFOR($Resource.ACETResources, '/js/vendor/chosen.jquery.min.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.ACETResources, '/css/vendor/chosen.min.css')}" />
    <apex:includeScript value="{!URLFOR($Resource.ACETResources, '/js/main.js')}" />  
    <apex:includeScript value="{!URLFOR($Resource.jQueryDatatableResources,'jquery.dataTables.min.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.jQueryDatatableResources,'jquery.dataTables.min.css')}" />
    <apex:includeScript value="{!URLFOR($Resource.jQueryDatatableResources,'jquery.highlight.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.jQueryDatatableResources,'dataTables.searchHighlight.min.js')}" />
    <apex:stylesheet value="{!URLFOR($Resource.jQueryDatatableResources,'dataTables.searchHighlight.css')}" />
    <apex:stylesheet value="//cdn.datatables.net/plug-ins/1.10.9/features/searchHighlight/dataTables.searchHighlight.css" />
    <script type="text/javascript">
        $(document).ready( function () {
            $("[id$='status-Active']").removeAttr('disabled');
            $("[id$='CaseHistoryTable']").tablesorter({ });
            var CaseHistoryTable = $('[cid$="CaseHistoryTable"]').parent('table').eq(0).DataTable({
            //enables results highlight
            searchHighlight: true,
            "pagingType": "full_numbers",
            //sets record lengths to show in picklist
            aLengthMenu: [
                [10, 25, 50, 100, 200, -1],
                [10, 25, 50, 100, 200, "All"]
            ],
            "iDisplayLength": 50,
             order: [[4, 'desc']],
           });   
            
            afOnPageLoad();
        });
        function checkActive() {
             var contractValue = $("input:radio[name$='Status']");
             contractValue.filter('[value="Active"]').prop("checked","true");
         }
        function drawCallback(settings) {
           if(settings.sTableId == 'datatableContracts') {
             var contractStatus;
             console.log('contractStatus' +contractStatus);
             console.log('entering');
             var totalActiveVisibleRows;
            $("[id$='pbtAgrmnts']").find(".auto-doc-list").find("tbody").find("tr").each(function(){
                    contractStatus = $("[name$=Status]:checked").val();
                    if(contractStatus == 'Active') {
                       if($(this).find('td:first img').length > 0 && $(this).find('td:first img').attr('src').indexOf('active.jpg') != 'undefined' && $(this).find('td:first img').attr('src').indexOf('active.jpg') > -1) {
                             console.log('test');
                             $(this).show();
                       }
                       if($(this).find('td:first img').length > 0 && $(this).find('td:first img').attr('src').indexOf('inactive.jpg') != 'undefined' && $(this).find('td:first img').attr('src').indexOf('inactive.jpg') > -1) {
                         console.log('test');
                         $(this).hide();
                      }
                      if ($(this).find('td.dataTables_empty').length > 0) {
                         console.log('teste');
                         totalActiveVisibleRows = 0;  
                      }
                      if ($(this).find('td.dataTables_empty').length == 0)  {
                         console.log('testlength');
                         totalActiveVisibleRows = $('#datatableContracts tbody tr:visible').length; 
                      }
                  }else {
                        $(this).show();
                    }
                });
                     console.log('totalActiveVisibleRows' +totalActiveVisibleRows);
                     if(contractStatus == 'Active') {
                     console.log('totalDefatotalActiveVisibleRowsultRows' +totalActiveVisibleRows);
                     $('#datatableContracts_info').html('Showing&nbsp;' +totalActiveVisibleRows+ '&nbsp;entries');   
               } 
                var totalRows = $('#datatableContracts tbody tr').length;
                console.log('totalRows' +totalRows);
                var totalHiddenRows = $('#datatableContracts tbody tr:hidden').length;
                console.log('totalHiddenRows' +totalHiddenRows);
                if(totalRows == totalHiddenRows) {
                    console.log('disablerows');
                    var contractValue = $("input:radio[name$='Status']");
                    contractValue.filter('[value="All"]').prop("checked","true");
                    $("[id$='status-Active']").attr("disabled","true");
                    setTable(contractValue);
              }
             } 
        }
        function setTable(contractValue) {
            console.log('contractValue' +contractValue);
            var totalVisibleRows;
            var totalAllRows;
            if(contractValue != null && contractValue != '') {
              $("[id$='pbtAgrmnts']").find(".auto-doc-list").find("tbody").find("tr").each(function(){
                    if(contractValue == 'Active') {
                       if($(this).find('td:first img').length > 0 && $(this).find('td:first img').attr('src').indexOf('active.jpg') != 'undefined' && $(this).find('td:first img').attr('src').indexOf('active.jpg') > -1) {
                             console.log('test');
                             $(this).show();
                       }
                       if($(this).find('td:first img').length > 0 && $(this).find('td:first img').attr('src').indexOf('inactive.jpg') != 'undefined' && $(this).find('td:first img').attr('src').indexOf('inactive.jpg') > -1) {
                         console.log('test');
                         $(this).hide();
                      }
                      if ($(this).find('td.dataTables_empty').length > 0) {
                         console.log('teste');
                         totalVisibleRows = 0;  
                      }
                      if ($(this).find('td.dataTables_empty').length == 0)  {
                         console.log('testlength');
                         totalVisibleRows = $('#datatableContracts tbody tr:visible').length; 
                      }
                  }else {
                        $(this).show();
                        if ($(this).find('td.dataTables_empty').length > 0) {
                         console.log('teste');
                         totalAllRows = 0;  
                      }
                      if ($(this).find('td.dataTables_empty').length == 0)  {
                         console.log('testlength');
                         totalAllRows = $('#datatableContracts tbody tr:visible').length; 
                      }
                    }
                });
                if(contractValue == 'Active') {
                      console.log('totalVisibleRows' +totalVisibleRows);
                     $('#datatableContracts_info').html('Showing&nbsp;' +totalVisibleRows+ '&nbsp;entries');
                 }else {
                    console.log('totalAllRows' +totalAllRows);
                    $('#datatableContracts_info').html('Showing&nbsp;' +totalAllRows+ '&nbsp;entries');
                 }
             }
        }
    </script>   
</apex:page>